**KONDISI KESELURUHAN UNIT TEST:**


$ npm test

> vite_react_shadcn_ts@0.0.0 test
> vitest


 DEV  v3.2.4 D:/worksites/canvastack/apps/projects/weddinvite

stdout | __tests__/database/structural-tests/phase-4-data-migration.test.cjs > PHASE 4: Wedding Data Migration to Generic Events > PHASE 4 COMPLETION VALIDATION > All migration components s
hould be complete and properly structured

ğŸ” PHASE 4 DATA MIGRATION ANALYSIS:
=====================================================
âœ… 006_event_types_foundation.sql:
   - Exists: âœ…
   - Complete: âœ…
   - Proper Structure: âœ…
   - Error Handling: âœ…
   - Content Length: 3289 characters

âœ… 007_events_core_tables.sql:
   - Exists: âœ…
   - Complete: âœ…
   - Proper Structure: âœ…
   - Error Handling: âœ…
   - Content Length: 8929 characters

âœ… 008_enhanced_indexing.sql:
   - Exists: âœ…
   - Complete: âœ…
   - Proper Structure: âœ…
   - Error Handling: âœ…
   - Content Length: 3415 characters

âœ… 009_wedding_compatibility.sql:
   - Exists: âœ…
   - Complete: âœ…
   - Proper Structure: âœ…
   - Error Handling: âœ…
   - Content Length: 3959 characters

âœ… 010_wedding_data_migration.sql:
   - Exists: âœ…
   - Complete: âœ…
   - Proper Structure: âœ…
   - Error Handling: âœ…
   - Content Length: 10242 characters

âœ… execute_transformation.cjs:
   - Exists: âœ…
   - Complete: âœ…
   - Proper Structure: âœ…
   - Error Handling: âœ…
   - Content Length: 24613 characters

âœ… README.md:
   - Exists: âœ…
   - Complete: âœ…
   - Proper Structure: âœ…
   - Error Handling: âœ…
   - Content Length: 9157 characters

ğŸ“Š PHASE 4 SUCCESS RATE: 100.00% (28/28 checks passed)
=====================================================


stdout | __tests__/database/structural-tests/phase-4-data-migration.test.cjs > PHASE 4: Wedding Data Migration to Generic Events > PHASE 4 COMPLETION VALIDATION > Migration framework should
 be ready for production execution

ğŸš€ MIGRATION EXECUTOR READINESS:
==================================
âœ… Class: YES
âœ… DryRun: YES
âœ… Rollback: YES
âœ… Validation: YES
âœ… Logging: YES
âœ… ErrorHandling: YES
âœ… Backup: YES
âœ… ProgressTracking: YES
==================================


 âœ“ __tests__/database/structural-tests/phase-4-data-migration.test.cjs (43 tests) 30ms
stdout | __tests__/database/structural-tests/phase-4-validation.test.cjs > PHASE 4: Data Migration Framework Validation > PHASE 4 COMPLETION VALIDATION > All migration components should be
complete and production-ready

ğŸ” PHASE 4 DATA MIGRATION ANALYSIS:
=====================================================
âœ… 006_event_types_foundation.sql:
   - Exists: âœ…
   - Complete: âœ…
   - Proper Structure: âœ…
   - Error Handling: âœ…
   - Content Length: 3289 characters

âœ… 007_events_core_tables.sql:
   - Exists: âœ…
   - Complete: âœ…
   - Proper Structure: âœ…
   - Error Handling: âœ…
   - Content Length: 8929 characters

âœ… 008_enhanced_indexing.sql:
   - Exists: âœ…
   - Complete: âœ…
   - Proper Structure: âœ…
   - Error Handling: âœ…
   - Content Length: 3415 characters

âœ… 009_wedding_compatibility.sql:
   - Exists: âœ…
   - Complete: âœ…
   - Proper Structure: âœ…
   - Error Handling: âœ…
   - Content Length: 3959 characters

âœ… 010_wedding_data_migration.sql:
   - Exists: âœ…
   - Complete: âœ…
   - Proper Structure: âœ…
   - Error Handling: âœ…
   - Content Length: 10242 characters

âœ… execute_transformation.cjs:
   - Exists: âœ…
   - Complete: âœ…
   - Proper Structure: âœ…
   - Error Handling: âœ…
   - Content Length: 24613 characters

âœ… README.md:
   - Exists: âœ…
   - Complete: âœ…
   - Proper Structure: âœ…
   - Error Handling: âœ…
   - Content Length: 9157 characters

ğŸ“Š PHASE 4 SUCCESS RATE: 100.00% (28/28 checks passed)
=====================================================


stdout | __tests__/database/structural-tests/phase-4-validation.test.cjs > PHASE 4: Data Migration Framework Validation > PHASE 4 COMPLETION VALIDATION > Migration framework should be produ
ction-ready

ğŸš€ MIGRATION EXECUTOR READINESS:
==================================
âœ… Class: YES
âœ… DryRun: YES
âœ… Rollback: YES
âœ… Validation: YES
âœ… Logging: YES
âœ… ErrorHandling: YES
âœ… Backup: YES
âœ… CLI: YES
==================================


stdout | __tests__/database/structural-tests/phase-4-validation.test.cjs > PHASE 4: Data Migration Framework Validation > PHASE 4 COMPLETION VALIDATION > Data migration should preserve inte
grity and compatibility

ğŸ›¡ï¸ DATA INTEGRITY VALIDATION:
===============================
âœ… BackupCreation: YES
âœ… DataTransformation: YES
âœ… CompatibilityViews: YES
âœ… RSVPMapping: YES
âœ… TenantIsolation: YES
âœ… Logging: YES
===============================


 âœ“ __tests__/database/structural-tests/phase-4-validation.test.cjs (40 tests) 44ms
stdout | __tests__/database/structural-tests/phase-2-3-hook-transformation.test.cjs > Phase 2.3: Generic Event Hooks Transformation > PHASE 2.3 COMPLETION VALIDATION > All required hooks sh
ould be implemented

ğŸ” PHASE 2.3 HOOK TRANSFORMATION ANALYSIS:
================================================
âœ… useEventContent.ts:
   - Exists: âœ…
   - Generic Support: âœ…
   - Backward Compatibility: âœ…
   - Proper Interfaces: âœ…
   - Complete Implementation: âœ…

âœ… useEventParticipants.ts:
   - Exists: âœ…
   - Generic Support: âœ…
   - Backward Compatibility: âœ…
   - Proper Interfaces: âœ…
   - Complete Implementation: âœ…

âœ… useEventSettings.ts:
   - Exists: âœ…
   - Generic Support: âœ…
   - Backward Compatibility: âœ…
   - Proper Interfaces: âœ…
   - Complete Implementation: âœ…

ğŸ“Š PHASE 2.3 SUCCESS RATE: 100.00% (15/15 checks passed)
================================================


stdout | __tests__/database/structural-tests/phase-2-3-hook-transformation.test.cjs > Phase 2.3: Generic Event Hooks Transformation > PHASE 2.3 COMPLETION VALIDATION > Theme manager should
support multiple event types

ğŸ¨ THEME MANAGER TRANSFORMATION:
================================
âœ… Multiple Event Type Themes: YES
âœ… Event Type Mapping: YES
================================


 âœ“ __tests__/database/structural-tests/phase-2-3-hook-transformation.test.cjs (49 tests) 50ms
stdout | __tests__/plugins/dynamic-form-system.test.cjs
âœ… PHASE 3: Dynamic Form System Tests - All tests configured
ğŸ“‹ Test Coverage:
  - Form Field Builder: âœ… Field creation, validation, presets
  - Validation Engine: âœ… Rules, cross-field, async validation
  - Form Utilities: âœ… Visibility, data extraction, summaries
  - Integration: âœ… Event-specific forms, complete workflows
  - Performance: âœ… Large forms, complex conditional logic

 âœ“ __tests__/plugins/dynamic-form-system.test.cjs (24 tests) 617ms
   âœ“ PHASE 3: Dynamic Form System > Form Utilities > should check field visibility correctly  384ms
stdout | __tests__/frontend/structural-tests/frontend-component-transformation.test.cjs
[2025-08-14T07:30:44.672Z] ğŸš€ Starting Frontend Component Transformation Tests (TFD)
[2025-08-14T07:30:44.675Z] =================================================================================
[2025-08-14T07:30:44.675Z] TEST 1: Validating generic event hook exists
[2025-08-14T07:30:44.675Z] âœ… Generic Event Content Hook: useEventContent.ts exists
[2025-08-14T07:30:44.675Z] âœ… Generic Event Hero Hook: useEventHero.ts exists
[2025-08-14T07:30:44.675Z] TEST 3: Validating wedding hooks backward compatibility
[2025-08-14T07:30:44.676Z] âŒ Wedding Content Hook Exists: useWeddingContent.ts missing
[2025-08-14T07:30:44.676Z] âŒ Wedding Hero Hook Exists: useWeddingHero.ts missing
[2025-08-14T07:30:44.676Z] TEST 5: Validating generic event components
[2025-08-14T07:30:44.676Z] âœ… Generic Event Hero Component: EventHero.tsx exists
[2025-08-14T07:30:44.677Z] âœ… Generic Event Details Component: EventDetails.tsx exists
[2025-08-14T07:30:44.677Z] âœ… Generic Participants Component: ParticipantsSection.tsx exists
[2025-08-14T07:30:44.677Z] TEST 8: Validating wedding components backward compatibility
[2025-08-14T07:30:44.677Z] âŒ Wedding Hero Component Exists: WeddingHero.tsx missing
[2025-08-14T07:30:44.677Z] âŒ Wedding Details Component Exists: WeddingDetails.tsx missing
[2025-08-14T07:30:44.677Z] âŒ Couple Section Component Exists: CoupleSection.tsx missing
[2025-08-14T07:30:44.677Z] TEST 11: Validating generic event hook content structure
[2025-08-14T07:30:44.678Z] âœ… Generic Event Participants Interface: Generic participant interfaces found
[2025-08-14T07:30:44.678Z] âŒ Generic Event Content Structure: Generic event content structure missing
[2025-08-14T07:30:44.678Z] âœ… Generic Event Data Models: Generic event data models found
[2025-08-14T07:30:44.678Z] âœ… Plugin Architecture Support: Plugin architecture support found
[2025-08-14T07:30:44.678Z] TEST 15: Validating database table name transformation
[2025-08-14T07:30:44.678Z] âœ… Generic Database Tables: Generic event and participant tables referenced
[2025-08-14T07:30:44.678Z] âŒ No Wedding-Specific Tables: Wedding-specific tables still referenced
[2025-08-14T07:30:44.678Z] âœ… Event Sections Support: Event sections/content support found
[2025-08-14T07:30:44.678Z] TEST 18: Validating generic component content
[2025-08-14T07:30:44.679Z] âœ… Generic Hook Usage: Uses useEventHero instead of useWeddingHero
[2025-08-14T07:30:44.679Z] âœ… Generic UI Text: No wedding-specific UI text found
[2025-08-14T07:30:44.679Z] âœ… Event Terminology: Generic event terminology used
[2025-08-14T07:30:44.679Z] âœ… Plugin Support in Components: Plugin support implemented in components
[2025-08-14T07:30:44.679Z] TEST 22: Validating wedding-to-event compatibility layer
[2025-08-14T07:30:44.680Z] âœ… Compatibility Layer Directory: Compatibility layer directory exists
[2025-08-14T07:30:44.680Z] âœ… Wedding Wrapper Exists: Wedding wrapper for backward compatibility exists
[2025-08-14T07:30:44.680Z] âœ… Wedding Plugin Mapping: Wedding-to-plugin mapping implemented
[2025-08-14T07:30:44.680Z] =================================================================================
[2025-08-14T07:30:44.680Z] ğŸ“Š FRONTEND COMPONENT TRANSFORMATION TEST RESULTS
[2025-08-14T07:30:44.680Z] Total Tests: 24
[2025-08-14T07:30:44.680Z] Passed: 17
[2025-08-14T07:30:44.680Z] Failed: 7
[2025-08-14T07:30:44.680Z] âš ï¸  Frontend transformation needs work!
[2025-08-14T07:30:44.680Z] Success Rate: 70.83%
[2025-08-14T07:30:44.680Z] =================================================================================
[2025-08-14T07:30:44.680Z] âœ¨ Frontend Component Transformation Tests Completed

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System
ğŸš€ Testing Roles & Permissions System...
ğŸ”§ SMART DB: Menggunakan mock mode (preferMock=true)
ğŸ”§ MOCK: Database connection established (mock mode)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System
âœ… Connected successfully! (Mock mode)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should verify default data exists

ğŸ“‹ TEST 1: Verifying Default Data...
ğŸ”§ MOCK: Query executed: SELECT COUNT(*) as count FROM permissions... (Type: COUNT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should verify default data exists
ğŸ“Š Default permissions: 25
ğŸ”§ MOCK: Query executed: SELECT COUNT(*) as count FROM user_roles... (Type: COUNT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should verify default data exists
ğŸ‘¥ Default roles: 5
ğŸ”§ MOCK: Query executed: SELECT COUNT(*) as count FROM role_permissions... (Type: COUNT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should verify default data exists
ğŸ”— Role-permission mappings: 25
ğŸ”§ MOCK: Query executed:
      SELECT name, resource, action, category, is... (Type: SELECT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should verify default data exists
ğŸ”‘ Sample permissions:
  1. create_events (events.create) - event_management
  2. manage_users (users.manage) - user_management
  3. manage_tenants (tenants.manage) - tenant_management

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should create and manage custom tenant roles

â• TEST 2: Creating Custom Tenant Role...
ğŸ”§ MOCK: Query executed:
      SELECT id, name FROM tenants
      WHERE t... (Type: SELECT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should create and manage custom tenant roles
ğŸ¢ Using tenant: Test Wedding Agency
ğŸ”§ MOCK: Query executed:
      INSERT INTO user_roles (tenant_id, name, di... (Type: INSERT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should create and manage custom tenant roles
âœ… Created custom role: Custom Event Manager (ID: mock-custom-role-id)

ğŸ”‘ TEST 3: Granting Permissions to Custom Role...
ğŸ”§ MOCK: Query executed:
      SELECT id, name FROM permissions
      WHE... (Type: SELECT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should create and manage custom tenant roles
ğŸ“‹ Granting 0 permissions to wedding_planner role...

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should assign roles to users and test permissions

ğŸ‘¤ TEST 4: Assigning Role to User...
ğŸ”§ MOCK: Query executed:
      SELECT tu.id, tu.first_name, tu.last_name, ... (Type: SELECT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should assign roles to users and test permissions
ğŸ‘¤ Testing with user: Test User (test@agency.com)
ğŸ”§ MOCK: Query executed:
      SELECT id, name FROM user_roles WHERE name ... (Type: SELECT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should assign roles to users and test permissions
âš ï¸  Custom role not found - creating mock assignment

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test role hierarchy and management

ğŸ‘‘ TEST 5: Testing Role Hierarchy & Management...
   âš ï¸  Skipping role hierarchy test in mock mode

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test role assignment with expiration

â° TEST 6: Testing Role Assignment with Expiration...
ğŸ”§ MOCK: Query executed:
      SELECT id FROM tenants WHERE type != 'super... (Type: SELECT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test role assignment with expiration
ğŸ”§ MOCK: Query executed:
      INSERT INTO user_roles (tenant_id, name, di... (Type: INSERT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test role assignment with expiration
ğŸ“ Created temporary role: Custom Event Manager
ğŸ”§ MOCK: Query executed:
      SELECT id FROM tenant_users WHERE tenant_id... (Type: SELECT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test role assignment with expiration
ğŸ”§ MOCK: Query executed:
        INSERT INTO user_role_assignments (user_i... (Type: INSERT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test role assignment with expiration
â±ï¸  Assigned temporary role with expiration: 2025-08-14T07:31:45.041Z

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test permission categories and system vs tenant permissions

ğŸ“š TEST 7: Testing Permission Categories & Filtering...
ğŸ”§ MOCK: Query executed:
      SELECT category, COUNT(*) as count
      FR... (Type: COUNT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test permission categories and system vs tenant permissions
ğŸ“Š Permissions by category:
  ğŸ“ undefined: 25 permissions

ğŸ—ï¸  TEST 8: System vs Tenant Permissions...
ğŸ”§ MOCK: Query executed:
      SELECT COUNT(*) as count FROM permissions W... (Type: COUNT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test permission categories and system vs tenant permissions
ğŸ”§ MOCK: Query executed:
      SELECT COUNT(*) as count FROM permissions W... (Type: COUNT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test permission categories and system vs tenant permissions
âš¡ System permissions: 25
ğŸ¢ Tenant permissions: 25

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should show final summary statistics

ğŸ“ˆ FINAL SUMMARY:
ğŸ”§ MOCK: Query executed:
      SELECT
        (SELECT COUNT(*) FROM permi... (Type: SUMMARY_STATS)
ğŸ”§ MOCK: Complex summary statistics query handled

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should show final summary statistics
ğŸ“Š Database Statistics:
  ğŸ”‘ Total Permissions: 25
  ğŸ‘‘ Active Roles: 8
  ğŸ”— Role-Permission Mappings: 15
  ğŸ‘¤ Active User-Role Assignments: 12

ğŸ‰ All roles & permissions tests completed successfully!
âœ… RBAC system is fully operational
âœ… Permission checking functions working
âœ… Role hierarchy system functional
âœ… Tenant isolation working properly
âœ… Expiration system operational

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System
ğŸ”§ MOCK: Database connection closed (mock mode)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System
ğŸ”Œ Database connection closed

 âœ“ __tests__/database/security/roles-permissions.test.ts (7 tests) 33ms
stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations
ğŸš€ Starting Real-Time CRUD Operations Test...
ğŸ”§ SMART DB: Using mock mode for ES module tests

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
â³ Connecting to database...
âœ… Connected successfully! (Mock mode)

ğŸ“– STEP 1: Reading existing data...
ğŸ”§ Mock Query: SELECT * FROM tenants ORDER BY created_at...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
ğŸ”§ Mock Query: SELECT * FROM tenant_users ORDER BY created_at...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
ğŸ“Š Found 0 tenants and 0 users

â• STEP 2: Creating new tenant...
ğŸ”§ Mock Query:
        INSERT INTO tenants (name, type, status, ...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
âœ… New tenant created: Mock Data (ID: mock-id-n2a2ettz3)

â• STEP 3: Creating new user in tenant...
ğŸ”§ Mock Query:
        INSERT INTO tenant_users (
          tena...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
âœ… New user created: Mock User (mock@test.com)

ğŸ“– STEP 4: Testing JOIN queries...
ğŸ”§ Mock Query:
        SELECT
          tu.id as user_id,
     ...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
ğŸ”— Users with tenant information:

âœï¸  STEP 5: Testing UPDATE operations...
ğŸ”§ Mock Query:
        UPDATE tenant_users
        SET
       ...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
âœ… Updated user profile data and last login for: mock@test.com

ğŸ”§ STEP 6: Skipping business logic functions (Mock mode)

ğŸ›¡ï¸  STEP 7: Testing constraint validations...
ğŸ”§ Mock Query:
          INSERT INTO tenant_users (tenant_id, em...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
âœ… Constraint validation passed (Mock mode - no actual constraints)
ğŸ”§ Mock Query:
          INSERT INTO tenant_users (tenant_id, em...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
âœ… Email format validation passed (Mock mode - no actual validation)

ğŸ“Š STEP 8: Final data verification...
ğŸ”§ Mock Query: SELECT COUNT(*) as count FROM tenants...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
ğŸ”§ Mock Query: SELECT COUNT(*) as count FROM tenant_users...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
ğŸ“ˆ Final counts:
  ğŸ‘¥ Tenants: 1
  ğŸ‘¤ Users: 1

ğŸ‰ All CRUD operations completed successfully!
âœ… Database can manage data in real-time (Mock mode)
âœ… All relationships and constraints are working
âœ… Business logic functions are operational
âœ… Data integrity is maintained

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations
ğŸ”Œ Mock connection closed

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations
ğŸ”Œ Database connection closed

 âœ“ __tests__/database/integration/realtime-crud.test.mjs (1 test) 21ms
stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should successfully connect (real or mock)
ğŸ” SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/archived/test-debug.test.js
Loading test file...
test function: function
expect function: function
After import - test: function
After import - expect: function

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should successfully connect (real or mock)
âœ… SMART DB: PostgreSQL connection berhasil

stdout | __tests__/archived/test-debug.test.js > debug test
Inside test function

 âœ“ __tests__/archived/test-debug.test.js (1 test) 6ms
stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should return connection info
ğŸ” SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should return connection info
âœ… SMART DB: PostgreSQL connection berhasil

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should return database client for queries
ğŸ” SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should return database client for queries
âœ… SMART DB: PostgreSQL connection berhasil

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should execute basic query successfully
ğŸ” SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should execute basic query successfully
âœ… SMART DB: PostgreSQL connection berhasil

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should handle connection errors gracefully with fallback
ğŸ” SMART DB: Mencoba koneksi ke PostgreSQL...

 âœ“ __tests__/archived/test-working.test.ts (2 tests) 5ms
stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should handle connection errors gracefully with fallback
âŒ SMART DB: PostgreSQL connection gagal: Connection timeout
ğŸ”§ SMART DB: Fallback ke mock mode
ğŸ”§ MOCK: Database connection established (mock mode)

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should handle connection errors gracefully with fallback
ğŸ”§ MOCK: Database connection closed (mock mode)

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection management > should close connection properly
ğŸ” SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection management > should close connection properly
âœ… SMART DB: PostgreSQL connection berhasil

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection management > should indicate when connection is active
ğŸ” SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection management > should indicate when connection is active
âœ… SMART DB: PostgreSQL connection berhasil

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > mock mode preference > should use mock when preferMock is true
ğŸ”§ SMART DB: Menggunakan mock mode (preferMock=true)
ğŸ”§ MOCK: Database connection established (mock mode)

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > mock mode preference > should use mock when preferMock is true
ğŸ”§ MOCK: Database connection closed (mock mode)

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > mock mode preference > should provide mock mode status
ğŸ” SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > mock mode preference > should provide mock mode status
âœ… SMART DB: PostgreSQL connection berhasil

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > pool operations > should initialize pool after connection
ğŸ” SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > pool operations > should initialize pool after connection
âœ… SMART DB: PostgreSQL connection berhasil

 âœ“ __tests__/archived/test-explicit.test.js (2 tests) 7ms
stderr | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > pool operations > should initialize pool after connection
Database connection failed: Error: getaddrinfo ENOTFOUND nonexistent-host
    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26) {
  errno: -3008,
  code: 'ENOTFOUND',
  syscall: 'getaddrinfo',
  hostname: 'nonexistent-host'
}

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > pool operations > should return pool instance
ğŸ” SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > pool operations > should return pool instance
âœ… SMART DB: PostgreSQL connection berhasil

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > query execution with different connections > should execute version query
ğŸ” SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > query execution with different connections > should execute version query
âœ… SMART DB: PostgreSQL connection berhasil

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > query execution with different connections > should execute tenant queries (with fallback to mock)
ğŸ” SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > query execution with different connections > should execute tenant queries (with fallback to mock)
âœ… SMART DB: PostgreSQL connection berhasil

 âœ“ __tests__/database/unit/smart-connection.test.ts (17 tests) 1866ms
   âœ“ SmartDatabaseConnection > connection establishment > should handle connection errors gracefully with fallback  513ms
 âœ“ __tests__/database/unit/simple.test.ts (1 test) 7ms
 âœ“ __tests__/database/unit/test-basic.test.ts (1 test) 8ms
 âœ“ __tests__/archived/test-js.test.js (1 test) 7ms
 âœ“ __tests__/archived/test-basic.test.js (1 test) 7ms
 âœ“ __tests__/archived/test-basic.test.ts (1 test) 4ms
 âœ“ __tests__/archived/test-globals.test.js (1 test) 6ms

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯ Failed Suites 17 â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯

 FAIL  __tests__/database/integration/database-realtime-verification.test.cjs [ __tests__/database/integration/database-realtime-verification.test.cjs ]
Error: Cannot find module 'D:\worksites\canvastack\apps\projects\weddinvite\src\database\connection.ts'
Require stack:
- D:\worksites\canvastack\apps\projects\weddinvite\__tests__\database\integration\database-realtime-verification.test.cjs
 â¯ __tests__/database/integration/database-realtime-verification.test.cjs:57:32
     55|
     56| // Database imports dengan proper path resolution
     57| const { DatabaseConnection } = require(path.resolve('./src/database/connection.ts'));
       |                                ^
     58| const { TenantsRepository } = require(path.resolve('./src/database/tenants.ts'));
     59| const { TenantUsersRepository } = require(path.resolve('./src/database/tenant-users.ts'));

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/17]â¯

 FAIL  __tests__/database/integration/event-management-engine.test.cjs [ __tests__/database/integration/event-management-engine.test.cjs ]
Error: Cannot find module '../utilities/db-connection.util.cjs'
Require stack:
- D:\worksites\canvastack\apps\projects\weddinvite\__tests__\database\integration\event-management-engine.test.cjs
 â¯ __tests__/database/integration/event-management-engine.test.cjs:11:83
      9| // Created: 2025-08-12
     10|
     11| const { executeQuery, executeTransaction, closeAllConnections, testConnection } = require('../utilities/db-connection.util.cjs');
       |                                                                                   ^
     12|
     13| async function runEventManagementEngineTests() {

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/17]â¯

 FAIL  __tests__/database/integration/event-management-simple.test.cjs [ __tests__/database/integration/event-management-simple.test.cjs ]
Error: Cannot find module '../utilities/db-connection.util.cjs'
Require stack:
- D:\worksites\canvastack\apps\projects\weddinvite\__tests__\database\integration\event-management-simple.test.cjs
 â¯ __tests__/database/integration/event-management-simple.test.cjs:11:83
      9| // Created: 2025-08-12
     10|
     11| const { executeQuery, executeTransaction, closeAllConnections, testConnection } = require('../utilities/db-connection.util.cjs');
       |                                                                                   ^
     12|
     13| async function runSimpleIntegrationTests() {

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/17]â¯

 FAIL  __tests__/database/integration/realtime-crud.test.cjs [ __tests__/database/integration/realtime-crud.test.cjs ]
Error: Cannot find module '../utilities/db-connection.util.cjs'
Require stack:
- D:\worksites\canvastack\apps\projects\weddinvite\__tests__\database\integration\realtime-crud.test.cjs
 â¯ __tests__/database/integration/realtime-crud.test.cjs:12:83
     10| // Created: 2025-08-12
     11|
     12| const { executeQuery, executeTransaction, closeAllConnections, testConnection } = require('../utilities/db-connection.util.cjs');
       |                                                                                   ^
     13|
     14| async function testRealTimeCrud() {

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[4/17]â¯

 FAIL  __tests__/database/integration/realtime-crud.test.ts [ __tests__/database/integration/realtime-crud.test.ts ]
Error: Cannot find module '../../src/database/core/smart-connection' imported from 'D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/integration/realtime-crud.test.ts'
 â¯ __tests__/database/integration/realtime-crud.test.ts:2:31
      1| import { describe, it, expect, beforeAll, afterAll } from 'vitest';
      2| import { SmartDatabaseConnection } from '../../src/database/core/smart-connection';
       |                               ^
      3|
      4| describe('Real-Time CRUD Operations', () => {

Caused by: Error: Failed to load url ../../src/database/core/smart-connection (resolved id: ../../src/database/core/smart-connection) in D:/worksites/canvastack/apps/projects/weddinvite/__t
ests__/database/security/rls-isolation.test.ts. Does the file exist?
 â¯ loadAndTransform node_modules/vite/dist/node/chunks/dep-C6uTJdX2.js:51968:17

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[5/17]â¯

 FAIL  __tests__/database/manual-tests/tenant-users-advanced.test.cjs [ __tests__/database/manual-tests/tenant-users-advanced.test.cjs ]
Error: No test suite found in file D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/manual-tests/tenant-users-advanced.test.cjs
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[6/17]â¯

 FAIL  __tests__/database/manual-tests/tenant-users-manual.test.cjs [ __tests__/database/manual-tests/tenant-users-manual.test.cjs ]
Error: No test suite found in file D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/manual-tests/tenant-users-manual.test.cjs
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[7/17]â¯

 FAIL  __tests__/database/manual-tests/tenants-comprehensive.test.cjs [ __tests__/database/manual-tests/tenants-comprehensive.test.cjs ]
Error: No test suite found in file D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/manual-tests/tenants-comprehensive.test.cjs
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[8/17]â¯

 FAIL  __tests__/database/migration-tests/post-migration.test.cjs [ __tests__/database/migration-tests/post-migration.test.cjs ]
Error: No test suite found in file D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/migration-tests/post-migration.test.cjs
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[9/17]â¯

 FAIL  __tests__/database/migration-tests/pre-migration.test.cjs [ __tests__/database/migration-tests/pre-migration.test.cjs ]
Error: No test suite found in file D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/migration-tests/pre-migration.test.cjs
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[10/17]â¯

 FAIL  __tests__/database/performance-tests/index-benchmark-simple.test.cjs [ __tests__/database/performance-tests/index-benchmark-simple.test.cjs ]
Error: No test suite found in file D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/performance-tests/index-benchmark-simple.test.cjs
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[11/17]â¯

 FAIL  __tests__/database/performance-tests/index-benchmark.test.cjs [ __tests__/database/performance-tests/index-benchmark.test.cjs ]
Error: No test suite found in file D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/performance-tests/index-benchmark.test.cjs
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[12/17]â¯

 FAIL  __tests__/database/performance-tests/index-performance-comprehensive.test.cjs [ __tests__/database/performance-tests/index-performance-comprehensive.test.cjs ]
Error: Cannot find module 'D:\worksites\canvastack\apps\projects\weddinvite\src\database\connection-js.cjs'
 RERUN  rerun all tests

stdout | __tests__/frontend/structural-tests/frontend-component-transformation.test.cjs
[2025-08-14T07:31:04.034Z] ğŸš€ Starting Frontend Component Transformation Tests (TFD)
[2025-08-14T07:31:04.036Z] =================================================================================
[2025-08-14T07:31:04.037Z] TEST 1: Validating generic event hook exists
[2025-08-14T07:31:04.037Z] âœ… Generic Event Content Hook: useEventContent.ts exists
[2025-08-14T07:31:04.037Z] âœ… Generic Event Hero Hook: useEventHero.ts exists
[2025-08-14T07:31:04.037Z] TEST 3: Validating wedding hooks backward compatibility
[2025-08-14T07:31:04.037Z] âŒ Wedding Content Hook Exists: useWeddingContent.ts missing
[2025-08-14T07:31:04.038Z] âŒ Wedding Hero Hook Exists: useWeddingHero.ts missing
[2025-08-14T07:31:04.038Z] TEST 5: Validating generic event components
[2025-08-14T07:31:04.039Z] âœ… Generic Event Hero Component: EventHero.tsx exists
[2025-08-14T07:31:04.039Z] âœ… Generic Event Details Component: EventDetails.tsx exists
[2025-08-14T07:31:04.039Z] âœ… Generic Participants Component: ParticipantsSection.tsx exists
[2025-08-14T07:31:04.039Z] TEST 8: Validating wedding components backward compatibility
[2025-08-14T07:31:04.039Z] âŒ Wedding Hero Component Exists: WeddingHero.tsx missing
[2025-08-14T07:31:04.039Z] âŒ Wedding Details Component Exists: WeddingDetails.tsx missing
[2025-08-14T07:31:04.039Z] âŒ Couple Section Component Exists: CoupleSection.tsx missing
[2025-08-14T07:31:04.039Z] TEST 11: Validating generic event hook content structure
[2025-08-14T07:31:04.040Z] âœ… Generic Event Participants Interface: Generic participant interfaces found
[2025-08-14T07:31:04.040Z] âŒ Generic Event Content Structure: Generic event content structure missing
[2025-08-14T07:31:04.040Z] âœ… Generic Event Data Models: Generic event data models found
[2025-08-14T07:31:04.040Z] âœ… Plugin Architecture Support: Plugin architecture support found
[2025-08-14T07:31:04.040Z] TEST 15: Validating database table name transformation
[2025-08-14T07:31:04.040Z] âœ… Generic Database Tables: Generic event and participant tables referenced
[2025-08-14T07:31:04.040Z] âŒ No Wedding-Specific Tables: Wedding-specific tables still referenced
[2025-08-14T07:31:04.040Z] âœ… Event Sections Support: Event sections/content support found
[2025-08-14T07:31:04.040Z] TEST 18: Validating generic component content
[2025-08-14T07:31:04.041Z] âœ… Generic Hook Usage: Uses useEventHero instead of useWeddingHero
[2025-08-14T07:31:04.041Z] âœ… Generic UI Text: No wedding-specific UI text found
[2025-08-14T07:31:04.041Z] âœ… Event Terminology: Generic event terminology used
[2025-08-14T07:31:04.041Z] âœ… Plugin Support in Components: Plugin support implemented in components
[2025-08-14T07:31:04.041Z] TEST 22: Validating wedding-to-event compatibility layer
[2025-08-14T07:31:04.041Z] âœ… Compatibility Layer Directory: Compatibility layer directory exists
[2025-08-14T07:31:04.041Z] âœ… Wedding Wrapper Exists: Wedding wrapper for backward compatibility exists
[2025-08-14T07:31:04.041Z] âœ… Wedding Plugin Mapping: Wedding-to-plugin mapping implemented
[2025-08-14T07:31:04.042Z] =================================================================================
[2025-08-14T07:31:04.042Z] ğŸ“Š FRONTEND COMPONENT TRANSFORMATION TEST RESULTS
[2025-08-14T07:31:04.042Z] Total Tests: 24
[2025-08-14T07:31:04.042Z] Passed: 17
[2025-08-14T07:31:04.042Z] Failed: 7
[2025-08-14T07:31:04.042Z] âš ï¸  Frontend transformation needs work!
[2025-08-14T07:31:04.042Z] Success Rate: 70.83%
[2025-08-14T07:31:04.042Z] =================================================================================
[2025-08-14T07:31:04.042Z] âœ¨ Frontend Component Transformation Tests Completed

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should successfully connect (real or mock)
ğŸ” SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should successfully connect (real or mock)
âœ… SMART DB: PostgreSQL connection berhasil

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should return connection info
ğŸ” SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should return connection info
âœ… SMART DB: PostgreSQL connection berhasil

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should return database client for queries
ğŸ” SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should return database client for queries
âœ… SMART DB: PostgreSQL connection berhasil

stdout | __tests__/plugins/dynamic-form-system.test.cjs
âœ… PHASE 3: Dynamic Form System Tests - All tests configured
ğŸ“‹ Test Coverage:
  - Form Field Builder: âœ… Field creation, validation, presets
  - Validation Engine: âœ… Rules, cross-field, async validation
  - Form Utilities: âœ… Visibility, data extraction, summaries
  - Integration: âœ… Event-specific forms, complete workflows
  - Performance: âœ… Large forms, complex conditional logic

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should execute basic query successfully
ğŸ” SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should execute basic query successfully
âœ… SMART DB: PostgreSQL connection berhasil

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should handle connection errors gracefully with fallback
ğŸ” SMART DB: Mencoba koneksi ke PostgreSQL...

 âœ“ __tests__/plugins/dynamic-form-system.test.cjs (24 tests) 150ms
stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should handle connection errors gracefully with fallback
âŒ SMART DB: PostgreSQL connection gagal: Connection timeout
ğŸ”§ SMART DB: Fallback ke mock mode
ğŸ”§ MOCK: Database connection established (mock mode)

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should handle connection errors gracefully with fallback
ğŸ”§ MOCK: Database connection closed (mock mode)

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection management > should close connection properly
ğŸ” SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection management > should close connection properly
âœ… SMART DB: PostgreSQL connection berhasil

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection management > should indicate when connection is active
ğŸ” SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/structural-tests/phase-2-3-hook-transformation.test.cjs > Phase 2.3: Generic Event Hooks Transformation > PHASE 2.3 COMPLETION VALIDATION > All required hooks sh
ould be implemented

ğŸ” PHASE 2.3 HOOK TRANSFORMATION ANALYSIS:
================================================
âœ… useEventContent.ts:
   - Exists: âœ…
   - Generic Support: âœ…
   - Backward Compatibility: âœ…
   - Proper Interfaces: âœ…
   - Complete Implementation: âœ…

âœ… useEventParticipants.ts:
   - Exists: âœ…
   - Generic Support: âœ…
   - Backward Compatibility: âœ…
   - Proper Interfaces: âœ…
   - Complete Implementation: âœ…

âœ… useEventSettings.ts:
   - Exists: âœ…
   - Generic Support: âœ…
   - Backward Compatibility: âœ…
   - Proper Interfaces: âœ…
   - Complete Implementation: âœ…

ğŸ“Š PHASE 2.3 SUCCESS RATE: 100.00% (15/15 checks passed)
================================================


stdout | __tests__/database/structural-tests/phase-2-3-hook-transformation.test.cjs > Phase 2.3: Generic Event Hooks Transformation > PHASE 2.3 COMPLETION VALIDATION > Theme manager should
support multiple event types

ğŸ¨ THEME MANAGER TRANSFORMATION:
================================
âœ… Multiple Event Type Themes: YES
âœ… Event Type Mapping: YES
================================


stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection management > should indicate when connection is active
âœ… SMART DB: PostgreSQL connection berhasil

 âœ“ __tests__/database/structural-tests/phase-2-3-hook-transformation.test.cjs (49 tests) 82ms
stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > mock mode preference > should use mock when preferMock is true
ğŸ”§ SMART DB: Menggunakan mock mode (preferMock=true)
ğŸ”§ MOCK: Database connection established (mock mode)

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > mock mode preference > should use mock when preferMock is true
ğŸ”§ MOCK: Database connection closed (mock mode)

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > mock mode preference > should provide mock mode status
ğŸ” SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > mock mode preference > should provide mock mode status
âœ… SMART DB: PostgreSQL connection berhasil

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > pool operations > should initialize pool after connection
ğŸ” SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > pool operations > should initialize pool after connection
âœ… SMART DB: PostgreSQL connection berhasil

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > pool operations > should return pool instance
ğŸ” SMART DB: Mencoba koneksi ke PostgreSQL...

stderr | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > pool operations > should return pool instance
Database connection failed: Error: getaddrinfo ENOTFOUND nonexistent-host
    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26) {
  errno: -3008,
  code: 'ENOTFOUND',
  syscall: 'getaddrinfo',
  hostname: 'nonexistent-host'
}

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > pool operations > should return pool instance
âœ… SMART DB: PostgreSQL connection berhasil

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > query execution with different connections > should execute version query
ğŸ” SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > query execution with different connections > should execute version query
âœ… SMART DB: PostgreSQL connection berhasil

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > query execution with different connections > should execute tenant queries (with fallback to mock)
ğŸ” SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > query execution with different connections > should execute tenant queries (with fallback to mock)
âœ… SMART DB: PostgreSQL connection berhasil

 âœ“ __tests__/database/unit/smart-connection.test.ts (17 tests) 1743ms
   âœ“ SmartDatabaseConnection > connection establishment > should handle connection errors gracefully with fallback  511ms
stdout | __tests__/database/structural-tests/phase-4-validation.test.cjs > PHASE 4: Data Migration Framework Validation > PHASE 4 COMPLETION VALIDATION > All migration components should be
complete and production-ready

ğŸ” PHASE 4 DATA MIGRATION ANALYSIS:
=====================================================
âœ… 006_event_types_foundation.sql:
   - Exists: âœ…
   - Complete: âœ…
   - Proper Structure: âœ…
   - Error Handling: âœ…
   - Content Length: 3289 characters

âœ… 007_events_core_tables.sql:
   - Exists: âœ…
   - Complete: âœ…
   - Proper Structure: âœ…
   - Error Handling: âœ…
   - Content Length: 8929 characters

âœ… 008_enhanced_indexing.sql:
   - Exists: âœ…
   - Complete: âœ…
   - Proper Structure: âœ…
   - Error Handling: âœ…
   - Content Length: 3415 characters

âœ… 009_wedding_compatibility.sql:
   - Exists: âœ…
   - Complete: âœ…
   - Proper Structure: âœ…
   - Error Handling: âœ…
   - Content Length: 3959 characters

âœ… 010_wedding_data_migration.sql:
   - Exists: âœ…
   - Complete: âœ…
   - Proper Structure: âœ…
   - Error Handling: âœ…
   - Content Length: 10242 characters

âœ… execute_transformation.cjs:
   - Exists: âœ…
   - Complete: âœ…
   - Proper Structure: âœ…
   - Error Handling: âœ…
   - Content Length: 24613 characters

âœ… README.md:
   - Exists: âœ…
   - Complete: âœ…
   - Proper Structure: âœ…
   - Error Handling: âœ…
   - Content Length: 9157 characters

ğŸ“Š PHASE 4 SUCCESS RATE: 100.00% (28/28 checks passed)
=====================================================


stdout | __tests__/database/structural-tests/phase-4-validation.test.cjs > PHASE 4: Data Migration Framework Validation > PHASE 4 COMPLETION VALIDATION > Migration framework should be produ
ction-ready

ğŸš€ MIGRATION EXECUTOR READINESS:
==================================
âœ… Class: YES
âœ… DryRun: YES
âœ… Rollback: YES
âœ… Validation: YES
âœ… Logging: YES
âœ… ErrorHandling: YES
âœ… Backup: YES
âœ… CLI: YES
==================================


stdout | __tests__/database/structural-tests/phase-4-validation.test.cjs > PHASE 4: Data Migration Framework Validation > PHASE 4 COMPLETION VALIDATION > Data migration should preserve inte
grity and compatibility

ğŸ›¡ï¸ DATA INTEGRITY VALIDATION:
===============================
âœ… BackupCreation: YES
âœ… DataTransformation: YES
âœ… CompatibilityViews: YES
âœ… RSVPMapping: YES
âœ… TenantIsolation: YES
âœ… Logging: YES
===============================


 âœ“ __tests__/database/structural-tests/phase-4-validation.test.cjs (40 tests) 67ms
stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System
ğŸš€ Testing Roles & Permissions System...
ğŸ”§ SMART DB: Menggunakan mock mode (preferMock=true)
ğŸ”§ MOCK: Database connection established (mock mode)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System
âœ… Connected successfully! (Mock mode)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should verify default data exists

ğŸ“‹ TEST 1: Verifying Default Data...
ğŸ”§ MOCK: Query executed: SELECT COUNT(*) as count FROM permissions... (Type: COUNT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should verify default data exists
ğŸ“Š Default permissions: 25
ğŸ”§ MOCK: Query executed: SELECT COUNT(*) as count FROM user_roles... (Type: COUNT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should verify default data exists
ğŸ‘¥ Default roles: 5
ğŸ”§ MOCK: Query executed: SELECT COUNT(*) as count FROM role_permissions... (Type: COUNT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should verify default data exists
ğŸ”— Role-permission mappings: 25
ğŸ”§ MOCK: Query executed:
      SELECT name, resource, action, category, is... (Type: SELECT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should verify default data exists
ğŸ”‘ Sample permissions:
  1. create_events (events.create) - event_management
  2. manage_users (users.manage) - user_management
  3. manage_tenants (tenants.manage) - tenant_management

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should create and manage custom tenant roles

â• TEST 2: Creating Custom Tenant Role...
ğŸ”§ MOCK: Query executed:
      SELECT id, name FROM tenants
      WHERE t... (Type: SELECT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should create and manage custom tenant roles
ğŸ¢ Using tenant: Test Wedding Agency
ğŸ”§ MOCK: Query executed:
      INSERT INTO user_roles (tenant_id, name, di... (Type: INSERT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should create and manage custom tenant roles
âœ… Created custom role: Custom Event Manager (ID: mock-custom-role-id)

ğŸ”‘ TEST 3: Granting Permissions to Custom Role...
ğŸ”§ MOCK: Query executed:
      SELECT id, name FROM permissions
      WHE... (Type: SELECT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should create and manage custom tenant roles
ğŸ“‹ Granting 0 permissions to wedding_planner role...

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should assign roles to users and test permissions

ğŸ‘¤ TEST 4: Assigning Role to User...
ğŸ”§ MOCK: Query executed:
      SELECT tu.id, tu.first_name, tu.last_name, ... (Type: SELECT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should assign roles to users and test permissions
ğŸ‘¤ Testing with user: Test User (test@agency.com)
ğŸ”§ MOCK: Query executed:
      SELECT id, name FROM user_roles WHERE name ... (Type: SELECT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should assign roles to users and test permissions
âš ï¸  Custom role not found - creating mock assignment

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test role hierarchy and management

ğŸ‘‘ TEST 5: Testing Role Hierarchy & Management...
   âš ï¸  Skipping role hierarchy test in mock mode

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test role assignment with expiration

â° TEST 6: Testing Role Assignment with Expiration...
ğŸ”§ MOCK: Query executed:
      SELECT id FROM tenants WHERE type != 'super... (Type: SELECT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test role assignment with expiration
ğŸ”§ MOCK: Query executed:
      INSERT INTO user_roles (tenant_id, name, di... (Type: INSERT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test role assignment with expiration
ğŸ“ Created temporary role: Custom Event Manager
ğŸ”§ MOCK: Query executed:
      SELECT id FROM tenant_users WHERE tenant_id... (Type: SELECT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test role assignment with expiration
ğŸ”§ MOCK: Query executed:
        INSERT INTO user_role_assignments (user_i... (Type: INSERT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test role assignment with expiration
â±ï¸  Assigned temporary role with expiration: 2025-08-14T07:32:06.975Z

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test permission categories and system vs tenant permissions

ğŸ“š TEST 7: Testing Permission Categories & Filtering...
ğŸ”§ MOCK: Query executed:
      SELECT category, COUNT(*) as count
      FR... (Type: COUNT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test permission categories and system vs tenant permissions
ğŸ“Š Permissions by category:
  ğŸ“ undefined: 25 permissions

ğŸ—ï¸  TEST 8: System vs Tenant Permissions...
ğŸ”§ MOCK: Query executed:
      SELECT COUNT(*) as count FROM permissions W... (Type: COUNT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test permission categories and system vs tenant permissions
ğŸ”§ MOCK: Query executed:
      SELECT COUNT(*) as count FROM permissions W... (Type: COUNT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test permission categories and system vs tenant permissions
âš¡ System permissions: 25
ğŸ¢ Tenant permissions: 25

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should show final summary statistics

ğŸ“ˆ FINAL SUMMARY:
ğŸ”§ MOCK: Query executed:
      SELECT
        (SELECT COUNT(*) FROM permi... (Type: SUMMARY_STATS)
ğŸ”§ MOCK: Complex summary statistics query handled

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should show final summary statistics
ğŸ“Š Database Statistics:
  ğŸ”‘ Total Permissions: 25
  ğŸ‘‘ Active Roles: 8
  ğŸ”— Role-Permission Mappings: 15
  ğŸ‘¤ Active User-Role Assignments: 12

ğŸ‰ All roles & permissions tests completed successfully!
âœ… RBAC system is fully operational
âœ… Permission checking functions working
âœ… Role hierarchy system functional
âœ… Tenant isolation working properly
âœ… Expiration system operational

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System
ğŸ”§ MOCK: Database connection closed (mock mode)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System
ğŸ”Œ Database connection closed

 âœ“ __tests__/database/security/roles-permissions.test.ts (7 tests) 31ms
stdout | __tests__/database/structural-tests/phase-4-data-migration.test.cjs > PHASE 4: Wedding Data Migration to Generic Events > PHASE 4 COMPLETION VALIDATION > All migration components s
hould be complete and properly structured

ğŸ” PHASE 4 DATA MIGRATION ANALYSIS:
=====================================================
âœ… 006_event_types_foundation.sql:
   - Exists: âœ…
   - Complete: âœ…
   - Proper Structure: âœ…
   - Error Handling: âœ…
   - Content Length: 3289 characters

âœ… 007_events_core_tables.sql:
   - Exists: âœ…
   - Complete: âœ…
   - Proper Structure: âœ…
   - Error Handling: âœ…
   - Content Length: 8929 characters

âœ… 008_enhanced_indexing.sql:
   - Exists: âœ…
   - Complete: âœ…
   - Proper Structure: âœ…
   - Error Handling: âœ…
   - Content Length: 3415 characters

âœ… 009_wedding_compatibility.sql:
   - Exists: âœ…
   - Complete: âœ…
   - Proper Structure: âœ…
   - Error Handling: âœ…
   - Content Length: 3959 characters

âœ… 010_wedding_data_migration.sql:
   - Exists: âœ…
   - Complete: âœ…
   - Proper Structure: âœ…
   - Error Handling: âœ…
   - Content Length: 10242 characters

âœ… execute_transformation.cjs:
   - Exists: âœ…
   - Complete: âœ…
   - Proper Structure: âœ…
   - Error Handling: âœ…
   - Content Length: 24613 characters

âœ… README.md:
   - Exists: âœ…
   - Complete: âœ…
   - Proper Structure: âœ…
   - Error Handling: âœ…
   - Content Length: 9157 characters

ğŸ“Š PHASE 4 SUCCESS RATE: 100.00% (28/28 checks passed)
=====================================================


stdout | __tests__/database/structural-tests/phase-4-data-migration.test.cjs > PHASE 4: Wedding Data Migration to Generic Events > PHASE 4 COMPLETION VALIDATION > Migration framework should
 be ready for production execution

ğŸš€ MIGRATION EXECUTOR READINESS:
==================================
âœ… Class: YES
âœ… DryRun: YES
âœ… Rollback: YES
âœ… Validation: YES
âœ… Logging: YES
âœ… ErrorHandling: YES
âœ… Backup: YES
âœ… ProgressTracking: YES
==================================


 âœ“ __tests__/database/structural-tests/phase-4-data-migration.test.cjs (43 tests) 43ms
stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations
ğŸš€ Starting Real-Time CRUD Operations Test...
ğŸ”§ SMART DB: Using mock mode for ES module tests

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
â³ Connecting to database...
âœ… Connected successfully! (Mock mode)

ğŸ“– STEP 1: Reading existing data...
ğŸ”§ Mock Query: SELECT * FROM tenants ORDER BY created_at...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
ğŸ”§ Mock Query: SELECT * FROM tenant_users ORDER BY created_at...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
ğŸ“Š Found 0 tenants and 0 users

â• STEP 2: Creating new tenant...
ğŸ”§ Mock Query:
        INSERT INTO tenants (name, type, status, ...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
âœ… New tenant created: Mock Data (ID: mock-id-rkhjuagdj)

â• STEP 3: Creating new user in tenant...
ğŸ”§ Mock Query:
        INSERT INTO tenant_users (
          tena...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
âœ… New user created: Mock User (mock@test.com)

ğŸ“– STEP 4: Testing JOIN queries...
ğŸ”§ Mock Query:
        SELECT
          tu.id as user_id,
     ...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
ğŸ”— Users with tenant information:

âœï¸  STEP 5: Testing UPDATE operations...
ğŸ”§ Mock Query:
        UPDATE tenant_users
        SET
       ...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
âœ… Updated user profile data and last login for: mock@test.com

ğŸ”§ STEP 6: Skipping business logic functions (Mock mode)

ğŸ›¡ï¸  STEP 7: Testing constraint validations...
ğŸ”§ Mock Query:
          INSERT INTO tenant_users (tenant_id, em...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
âœ… Constraint validation passed (Mock mode - no actual constraints)
ğŸ”§ Mock Query:
          INSERT INTO tenant_users (tenant_id, em...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
âœ… Email format validation passed (Mock mode - no actual validation)

ğŸ“Š STEP 8: Final data verification...
ğŸ”§ Mock Query: SELECT COUNT(*) as count FROM tenants...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
ğŸ”§ Mock Query: SELECT COUNT(*) as count FROM tenant_users...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
ğŸ“ˆ Final counts:
  ğŸ‘¥ Tenants: 1
  ğŸ‘¤ Users: 1

ğŸ‰ All CRUD operations completed successfully!
âœ… Database can manage data in real-time (Mock mode)
âœ… All relationships and constraints are working
âœ… Business logic functions are operational
âœ… Data integrity is maintained

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations
ğŸ”Œ Mock connection closed

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations
ğŸ”Œ Database connection closed

 âœ“ __tests__/database/integration/realtime-crud.test.mjs (1 test) 18ms
 âœ“ __tests__/database/unit/test-basic.test.ts (1 test) 6ms
 âœ“ __tests__/archived/test-explicit.test.js (2 tests) 8ms
 âœ“ __tests__/archived/test-js.test.js (1 test) 7ms
 âœ“ __tests__/archived/test-basic.test.js (1 test) 6ms
 âœ“ __tests__/database/unit/simple.test.ts (1 test) 7ms
stdout | __tests__/archived/test-debug.test.js
Loading test file...
test function: function
expect function: function
After import - test: function
After import - expect: function

stdout | __tests__/archived/test-debug.test.js > debug test
Inside test function

 âœ“ __tests__/archived/test-debug.test.js (1 test) 8ms
 âœ“ __tests__/archived/test-globals.test.js (1 test) 6ms
 âœ“ __tests__/archived/test-working.test.ts (2 tests) 8ms
 âœ“ __tests__/archived/test-basic.test.ts (1 test) 6ms

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯ Failed Suites 17 â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯

 FAIL  __tests__/database/integration/database-realtime-verification.test.cjs [ __tests__/database/integration/database-realtime-verification.test.cjs ]
Error: Cannot find module 'D:\worksites\canvastack\apps\projects\weddinvite\src\database\connection.ts'
Require stack:
- D:\worksites\canvastack\apps\projects\weddinvite\__tests__\database\integration\database-realtime-verification.test.cjs
 â¯ __tests__/database/integration/database-realtime-verification.test.cjs:57:32
     55|
     56| // Database imports dengan proper path resolution
     57| const { DatabaseConnection } = require(path.resolve('./src/database/connection.ts'));
       |                                ^
     58| const { TenantsRepository } = require(path.resolve('./src/database/tenants.ts'));
     59| const { TenantUsersRepository } = require(path.resolve('./src/database/tenant-users.ts'));

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/17]â¯

 FAIL  __tests__/database/integration/event-management-engine.test.cjs [ __tests__/database/integration/event-management-engine.test.cjs ]
Error: Cannot find module '../utilities/db-connection.util.cjs'
Require stack:
- D:\worksites\canvastack\apps\projects\weddinvite\__tests__\database\integration\event-management-engine.test.cjs
 â¯ __tests__/database/integration/event-management-engine.test.cjs:11:83
      9| // Created: 2025-08-12
     10|
     11| const { executeQuery, executeTransaction, closeAllConnections, testConnection } = require('../utilities/db-connection.util.cjs');
       |                                                                                   ^
     12|
     13| async function runEventManagementEngineTests() {

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/17]â¯

 FAIL  __tests__/database/integration/event-management-simple.test.cjs [ __tests__/database/integration/event-management-simple.test.cjs ]
Error: Cannot find module '../utilities/db-connection.util.cjs'
Require stack:
- D:\worksites\canvastack\apps\projects\weddinvite\__tests__\database\integration\event-management-simple.test.cjs
 â¯ __tests__/database/integration/event-management-simple.test.cjs:11:83
      9| // Created: 2025-08-12
     10|
     11| const { executeQuery, executeTransaction, closeAllConnections, testConnection } = require('../utilities/db-connection.util.cjs');
       |                                                                                   ^
     12|
     13| async function runSimpleIntegrationTests() {

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/17]â¯

 FAIL  __tests__/database/integration/realtime-crud.test.cjs [ __tests__/database/integration/realtime-crud.test.cjs ]
Error: Cannot find module '../utilities/db-connection.util.cjs'
Require stack:
- D:\worksites\canvastack\apps\projects\weddinvite\__tests__\database\integration\realtime-crud.test.cjs
 â¯ __tests__/database/integration/realtime-crud.test.cjs:12:83
     10| // Created: 2025-08-12
     11|
     12| const { executeQuery, executeTransaction, closeAllConnections, testConnection } = require('../utilities/db-connection.util.cjs');
       |                                                                                   ^
     13|
     14| async function testRealTimeCrud() {

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[4/17]â¯

 FAIL  __tests__/database/integration/realtime-crud.test.ts [ __tests__/database/integration/realtime-crud.test.ts ]
Error: Cannot find module '../../src/database/core/smart-connection' imported from 'D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/integration/realtime-crud.test.ts'
 â¯ __tests__/database/integration/realtime-crud.test.ts:2:31
      1| import { describe, it, expect, beforeAll, afterAll } from 'vitest';
      2| import { SmartDatabaseConnection } from '../../src/database/core/smart-connection';
       |                               ^
      3|
      4| describe('Real-Time CRUD Operations', () => {

Caused by: Error: Failed to load url ../../src/database/core/smart-connection (resolved id: ../../src/database/core/smart-connection) in D:/worksites/canvastack/apps/projects/weddinvite/__t
ests__/database/security/rls-isolation.test.ts. Does the file exist?
 â¯ loadAndTransform node_modules/vite/dist/node/chunks/dep-C6uTJdX2.js:51968:17

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[5/17]â¯

 FAIL  __tests__/database/manual-tests/tenant-users-advanced.test.cjs [ __tests__/database/manual-tests/tenant-users-advanced.test.cjs ]
Error: No test suite found in file D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/manual-tests/tenant-users-advanced.test.cjs
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[6/17]â¯

 FAIL  __tests__/database/manual-tests/tenant-users-manual.test.cjs [ __tests__/database/manual-tests/tenant-users-manual.test.cjs ]
Error: No test suite found in file D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/manual-tests/tenant-users-manual.test.cjs
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[7/17]â¯

 FAIL  __tests__/database/manual-tests/tenants-comprehensive.test.cjs [ __tests__/database/manual-tests/tenants-comprehensive.test.cjs ]
Error: No test suite found in file D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/manual-tests/tenants-comprehensive.test.cjs
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[8/17]â¯

 FAIL  __tests__/database/migration-tests/post-migration.test.cjs [ __tests__/database/migration-tests/post-migration.test.cjs ]
Error: No test suite found in file D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/migration-tests/post-migration.test.cjs
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[9/17]â¯

 FAIL  __tests__/database/migration-tests/pre-migration.test.cjs [ __tests__/database/migration-tests/pre-migration.test.cjs ]
Error: No test suite found in file D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/migration-tests/pre-migration.test.cjs
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[10/17]â¯

 FAIL  __tests__/database/performance-tests/index-benchmark-simple.test.cjs [ __tests__/database/performance-tests/index-benchmark-simple.test.cjs ]
Error: No test suite found in file D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/performance-tests/index-benchmark-simple.test.cjs
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[11/17]â¯

 FAIL  __tests__/database/performance-tests/index-benchmark.test.cjs [ __tests__/database/performance-tests/index-benchmark.test.cjs ]
Error: No test suite found in file D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/performance-tests/index-benchmark.test.cjs
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[12/17]â¯

 FAIL  __tests__/database/performance-tests/index-performance-comprehensive.test.cjs [ __tests__/database/performance-tests/index-performance-comprehensive.test.cjs ]
Error: Cannot find module 'D:\worksites\canvastack\apps\projects\weddinvite\src\database\connection-js.cjs'
Require stack:
- D:\worksites\canvastack\apps\projects\weddinvite\__tests__\database\performance-tests\index-performance-comprehensive.test.cjs
 â¯ __tests__/database/performance-tests/index-performance-comprehensive.test.cjs:60:31
     58|
     59| // Database connection imports dengan proper path resolution
     60| const { connectToDatabase } = require(path.resolve('./src/database/connection-js.cjs'));
       |                               ^
     61| const { createTestTenant, cleanupTestTenant } = require(path.resolve('./src/database/test-tenants-manual-js.cjs'));
     62|

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[13/17]â¯

 FAIL  __tests__/database/performance-tests/slow-query-detector.test.cjs [ __tests__/database/performance-tests/slow-query-detector.test.cjs ]
Error: No test suite found in file D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/performance-tests/slow-query-detector.test.cjs
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[14/17]â¯

 FAIL  __tests__/database/security/rls-isolation.test.ts [ __tests__/database/security/rls-isolation.test.ts ]
Error: Cannot find module '../../src/database/core/smart-connection' imported from 'D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/security/rls-isolation.test.ts'
 â¯ __tests__/database/security/rls-isolation.test.ts:2:31
      1| /**
      2|  * Comprehensive Row Level Security (RLS) Testing
       |                               ^
      3|  * Tests tenant isolation, security policies, and context management
      4|  */

Caused by: Error: Failed to load url ../../src/database/core/smart-connection (resolved id: ../../src/database/core/smart-connection) in D:/worksites/canvastack/apps/projects/weddinvite/__t
ests__/database/security/rls-isolation.test.ts. Does the file exist?
 â¯ loadAndTransform node_modules/vite/dist/node/chunks/dep-C6uTJdX2.js:51968:17

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[15/17]â¯

 FAIL  __tests__/database/validation-tests/post-transformation.test.cjs [ __tests__/database/validation-tests/post-transformation.test.cjs ]
Error: No test suite found in file D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/validation-tests/post-transformation.test.cjs
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[16/17]â¯

 FAIL  __tests__/frontend/structural-tests/frontend-component-transformation.test.cjs [ __tests__/frontend/structural-tests/frontend-component-transformation.test.cjs ]
Error: No test suite found in file D:/worksites/canvastack/apps/projects/weddinvite/__tests__/frontend/structural-tests/frontend-component-transformation.test.cjs
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[17/17]â¯


 Test Files  17 failed | 16 passed (33)
      Tests  192 passed (192)
   Start at  14:30:58
   Duration  3.64s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit

