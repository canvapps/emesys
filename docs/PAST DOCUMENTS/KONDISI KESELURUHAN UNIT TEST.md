**KONDISI KESELURUHAN UNIT TEST:**


$ npm test

> vite_react_shadcn_ts@0.0.0 test
> vitest


 DEV  v3.2.4 D:/worksites/canvastack/apps/projects/weddinvite

stdout | __tests__/database/structural-tests/phase-4-data-migration.test.cjs > PHASE 4: Wedding Data Migration to Generic Events > PHASE 4 COMPLETION VALIDATION > All migration components s
hould be complete and properly structured

🔍 PHASE 4 DATA MIGRATION ANALYSIS:
=====================================================
✅ 006_event_types_foundation.sql:
   - Exists: ✅
   - Complete: ✅
   - Proper Structure: ✅
   - Error Handling: ✅
   - Content Length: 3289 characters

✅ 007_events_core_tables.sql:
   - Exists: ✅
   - Complete: ✅
   - Proper Structure: ✅
   - Error Handling: ✅
   - Content Length: 8929 characters

✅ 008_enhanced_indexing.sql:
   - Exists: ✅
   - Complete: ✅
   - Proper Structure: ✅
   - Error Handling: ✅
   - Content Length: 3415 characters

✅ 009_wedding_compatibility.sql:
   - Exists: ✅
   - Complete: ✅
   - Proper Structure: ✅
   - Error Handling: ✅
   - Content Length: 3959 characters

✅ 010_wedding_data_migration.sql:
   - Exists: ✅
   - Complete: ✅
   - Proper Structure: ✅
   - Error Handling: ✅
   - Content Length: 10242 characters

✅ execute_transformation.cjs:
   - Exists: ✅
   - Complete: ✅
   - Proper Structure: ✅
   - Error Handling: ✅
   - Content Length: 24613 characters

✅ README.md:
   - Exists: ✅
   - Complete: ✅
   - Proper Structure: ✅
   - Error Handling: ✅
   - Content Length: 9157 characters

📊 PHASE 4 SUCCESS RATE: 100.00% (28/28 checks passed)
=====================================================


stdout | __tests__/database/structural-tests/phase-4-data-migration.test.cjs > PHASE 4: Wedding Data Migration to Generic Events > PHASE 4 COMPLETION VALIDATION > Migration framework should
 be ready for production execution

🚀 MIGRATION EXECUTOR READINESS:
==================================
✅ Class: YES
✅ DryRun: YES
✅ Rollback: YES
✅ Validation: YES
✅ Logging: YES
✅ ErrorHandling: YES
✅ Backup: YES
✅ ProgressTracking: YES
==================================


 ✓ __tests__/database/structural-tests/phase-4-data-migration.test.cjs (43 tests) 30ms
stdout | __tests__/database/structural-tests/phase-4-validation.test.cjs > PHASE 4: Data Migration Framework Validation > PHASE 4 COMPLETION VALIDATION > All migration components should be
complete and production-ready

🔍 PHASE 4 DATA MIGRATION ANALYSIS:
=====================================================
✅ 006_event_types_foundation.sql:
   - Exists: ✅
   - Complete: ✅
   - Proper Structure: ✅
   - Error Handling: ✅
   - Content Length: 3289 characters

✅ 007_events_core_tables.sql:
   - Exists: ✅
   - Complete: ✅
   - Proper Structure: ✅
   - Error Handling: ✅
   - Content Length: 8929 characters

✅ 008_enhanced_indexing.sql:
   - Exists: ✅
   - Complete: ✅
   - Proper Structure: ✅
   - Error Handling: ✅
   - Content Length: 3415 characters

✅ 009_wedding_compatibility.sql:
   - Exists: ✅
   - Complete: ✅
   - Proper Structure: ✅
   - Error Handling: ✅
   - Content Length: 3959 characters

✅ 010_wedding_data_migration.sql:
   - Exists: ✅
   - Complete: ✅
   - Proper Structure: ✅
   - Error Handling: ✅
   - Content Length: 10242 characters

✅ execute_transformation.cjs:
   - Exists: ✅
   - Complete: ✅
   - Proper Structure: ✅
   - Error Handling: ✅
   - Content Length: 24613 characters

✅ README.md:
   - Exists: ✅
   - Complete: ✅
   - Proper Structure: ✅
   - Error Handling: ✅
   - Content Length: 9157 characters

📊 PHASE 4 SUCCESS RATE: 100.00% (28/28 checks passed)
=====================================================


stdout | __tests__/database/structural-tests/phase-4-validation.test.cjs > PHASE 4: Data Migration Framework Validation > PHASE 4 COMPLETION VALIDATION > Migration framework should be produ
ction-ready

🚀 MIGRATION EXECUTOR READINESS:
==================================
✅ Class: YES
✅ DryRun: YES
✅ Rollback: YES
✅ Validation: YES
✅ Logging: YES
✅ ErrorHandling: YES
✅ Backup: YES
✅ CLI: YES
==================================


stdout | __tests__/database/structural-tests/phase-4-validation.test.cjs > PHASE 4: Data Migration Framework Validation > PHASE 4 COMPLETION VALIDATION > Data migration should preserve inte
grity and compatibility

🛡️ DATA INTEGRITY VALIDATION:
===============================
✅ BackupCreation: YES
✅ DataTransformation: YES
✅ CompatibilityViews: YES
✅ RSVPMapping: YES
✅ TenantIsolation: YES
✅ Logging: YES
===============================


 ✓ __tests__/database/structural-tests/phase-4-validation.test.cjs (40 tests) 44ms
stdout | __tests__/database/structural-tests/phase-2-3-hook-transformation.test.cjs > Phase 2.3: Generic Event Hooks Transformation > PHASE 2.3 COMPLETION VALIDATION > All required hooks sh
ould be implemented

🔍 PHASE 2.3 HOOK TRANSFORMATION ANALYSIS:
================================================
✅ useEventContent.ts:
   - Exists: ✅
   - Generic Support: ✅
   - Backward Compatibility: ✅
   - Proper Interfaces: ✅
   - Complete Implementation: ✅

✅ useEventParticipants.ts:
   - Exists: ✅
   - Generic Support: ✅
   - Backward Compatibility: ✅
   - Proper Interfaces: ✅
   - Complete Implementation: ✅

✅ useEventSettings.ts:
   - Exists: ✅
   - Generic Support: ✅
   - Backward Compatibility: ✅
   - Proper Interfaces: ✅
   - Complete Implementation: ✅

📊 PHASE 2.3 SUCCESS RATE: 100.00% (15/15 checks passed)
================================================


stdout | __tests__/database/structural-tests/phase-2-3-hook-transformation.test.cjs > Phase 2.3: Generic Event Hooks Transformation > PHASE 2.3 COMPLETION VALIDATION > Theme manager should
support multiple event types

🎨 THEME MANAGER TRANSFORMATION:
================================
✅ Multiple Event Type Themes: YES
✅ Event Type Mapping: YES
================================


 ✓ __tests__/database/structural-tests/phase-2-3-hook-transformation.test.cjs (49 tests) 50ms
stdout | __tests__/plugins/dynamic-form-system.test.cjs
✅ PHASE 3: Dynamic Form System Tests - All tests configured
📋 Test Coverage:
  - Form Field Builder: ✅ Field creation, validation, presets
  - Validation Engine: ✅ Rules, cross-field, async validation
  - Form Utilities: ✅ Visibility, data extraction, summaries
  - Integration: ✅ Event-specific forms, complete workflows
  - Performance: ✅ Large forms, complex conditional logic

 ✓ __tests__/plugins/dynamic-form-system.test.cjs (24 tests) 617ms
   ✓ PHASE 3: Dynamic Form System > Form Utilities > should check field visibility correctly  384ms
stdout | __tests__/frontend/structural-tests/frontend-component-transformation.test.cjs
[2025-08-14T07:30:44.672Z] 🚀 Starting Frontend Component Transformation Tests (TFD)
[2025-08-14T07:30:44.675Z] =================================================================================
[2025-08-14T07:30:44.675Z] TEST 1: Validating generic event hook exists
[2025-08-14T07:30:44.675Z] ✅ Generic Event Content Hook: useEventContent.ts exists
[2025-08-14T07:30:44.675Z] ✅ Generic Event Hero Hook: useEventHero.ts exists
[2025-08-14T07:30:44.675Z] TEST 3: Validating wedding hooks backward compatibility
[2025-08-14T07:30:44.676Z] ❌ Wedding Content Hook Exists: useWeddingContent.ts missing
[2025-08-14T07:30:44.676Z] ❌ Wedding Hero Hook Exists: useWeddingHero.ts missing
[2025-08-14T07:30:44.676Z] TEST 5: Validating generic event components
[2025-08-14T07:30:44.676Z] ✅ Generic Event Hero Component: EventHero.tsx exists
[2025-08-14T07:30:44.677Z] ✅ Generic Event Details Component: EventDetails.tsx exists
[2025-08-14T07:30:44.677Z] ✅ Generic Participants Component: ParticipantsSection.tsx exists
[2025-08-14T07:30:44.677Z] TEST 8: Validating wedding components backward compatibility
[2025-08-14T07:30:44.677Z] ❌ Wedding Hero Component Exists: WeddingHero.tsx missing
[2025-08-14T07:30:44.677Z] ❌ Wedding Details Component Exists: WeddingDetails.tsx missing
[2025-08-14T07:30:44.677Z] ❌ Couple Section Component Exists: CoupleSection.tsx missing
[2025-08-14T07:30:44.677Z] TEST 11: Validating generic event hook content structure
[2025-08-14T07:30:44.678Z] ✅ Generic Event Participants Interface: Generic participant interfaces found
[2025-08-14T07:30:44.678Z] ❌ Generic Event Content Structure: Generic event content structure missing
[2025-08-14T07:30:44.678Z] ✅ Generic Event Data Models: Generic event data models found
[2025-08-14T07:30:44.678Z] ✅ Plugin Architecture Support: Plugin architecture support found
[2025-08-14T07:30:44.678Z] TEST 15: Validating database table name transformation
[2025-08-14T07:30:44.678Z] ✅ Generic Database Tables: Generic event and participant tables referenced
[2025-08-14T07:30:44.678Z] ❌ No Wedding-Specific Tables: Wedding-specific tables still referenced
[2025-08-14T07:30:44.678Z] ✅ Event Sections Support: Event sections/content support found
[2025-08-14T07:30:44.678Z] TEST 18: Validating generic component content
[2025-08-14T07:30:44.679Z] ✅ Generic Hook Usage: Uses useEventHero instead of useWeddingHero
[2025-08-14T07:30:44.679Z] ✅ Generic UI Text: No wedding-specific UI text found
[2025-08-14T07:30:44.679Z] ✅ Event Terminology: Generic event terminology used
[2025-08-14T07:30:44.679Z] ✅ Plugin Support in Components: Plugin support implemented in components
[2025-08-14T07:30:44.679Z] TEST 22: Validating wedding-to-event compatibility layer
[2025-08-14T07:30:44.680Z] ✅ Compatibility Layer Directory: Compatibility layer directory exists
[2025-08-14T07:30:44.680Z] ✅ Wedding Wrapper Exists: Wedding wrapper for backward compatibility exists
[2025-08-14T07:30:44.680Z] ✅ Wedding Plugin Mapping: Wedding-to-plugin mapping implemented
[2025-08-14T07:30:44.680Z] =================================================================================
[2025-08-14T07:30:44.680Z] 📊 FRONTEND COMPONENT TRANSFORMATION TEST RESULTS
[2025-08-14T07:30:44.680Z] Total Tests: 24
[2025-08-14T07:30:44.680Z] Passed: 17
[2025-08-14T07:30:44.680Z] Failed: 7
[2025-08-14T07:30:44.680Z] ⚠️  Frontend transformation needs work!
[2025-08-14T07:30:44.680Z] Success Rate: 70.83%
[2025-08-14T07:30:44.680Z] =================================================================================
[2025-08-14T07:30:44.680Z] ✨ Frontend Component Transformation Tests Completed

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System
🚀 Testing Roles & Permissions System...
🔧 SMART DB: Menggunakan mock mode (preferMock=true)
🔧 MOCK: Database connection established (mock mode)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System
✅ Connected successfully! (Mock mode)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should verify default data exists

📋 TEST 1: Verifying Default Data...
🔧 MOCK: Query executed: SELECT COUNT(*) as count FROM permissions... (Type: COUNT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should verify default data exists
📊 Default permissions: 25
🔧 MOCK: Query executed: SELECT COUNT(*) as count FROM user_roles... (Type: COUNT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should verify default data exists
👥 Default roles: 5
🔧 MOCK: Query executed: SELECT COUNT(*) as count FROM role_permissions... (Type: COUNT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should verify default data exists
🔗 Role-permission mappings: 25
🔧 MOCK: Query executed:
      SELECT name, resource, action, category, is... (Type: SELECT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should verify default data exists
🔑 Sample permissions:
  1. create_events (events.create) - event_management
  2. manage_users (users.manage) - user_management
  3. manage_tenants (tenants.manage) - tenant_management

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should create and manage custom tenant roles

➕ TEST 2: Creating Custom Tenant Role...
🔧 MOCK: Query executed:
      SELECT id, name FROM tenants
      WHERE t... (Type: SELECT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should create and manage custom tenant roles
🏢 Using tenant: Test Wedding Agency
🔧 MOCK: Query executed:
      INSERT INTO user_roles (tenant_id, name, di... (Type: INSERT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should create and manage custom tenant roles
✅ Created custom role: Custom Event Manager (ID: mock-custom-role-id)

🔑 TEST 3: Granting Permissions to Custom Role...
🔧 MOCK: Query executed:
      SELECT id, name FROM permissions
      WHE... (Type: SELECT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should create and manage custom tenant roles
📋 Granting 0 permissions to wedding_planner role...

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should assign roles to users and test permissions

👤 TEST 4: Assigning Role to User...
🔧 MOCK: Query executed:
      SELECT tu.id, tu.first_name, tu.last_name, ... (Type: SELECT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should assign roles to users and test permissions
👤 Testing with user: Test User (test@agency.com)
🔧 MOCK: Query executed:
      SELECT id, name FROM user_roles WHERE name ... (Type: SELECT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should assign roles to users and test permissions
⚠️  Custom role not found - creating mock assignment

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test role hierarchy and management

👑 TEST 5: Testing Role Hierarchy & Management...
   ⚠️  Skipping role hierarchy test in mock mode

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test role assignment with expiration

⏰ TEST 6: Testing Role Assignment with Expiration...
🔧 MOCK: Query executed:
      SELECT id FROM tenants WHERE type != 'super... (Type: SELECT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test role assignment with expiration
🔧 MOCK: Query executed:
      INSERT INTO user_roles (tenant_id, name, di... (Type: INSERT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test role assignment with expiration
📝 Created temporary role: Custom Event Manager
🔧 MOCK: Query executed:
      SELECT id FROM tenant_users WHERE tenant_id... (Type: SELECT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test role assignment with expiration
🔧 MOCK: Query executed:
        INSERT INTO user_role_assignments (user_i... (Type: INSERT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test role assignment with expiration
⏱️  Assigned temporary role with expiration: 2025-08-14T07:31:45.041Z

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test permission categories and system vs tenant permissions

📚 TEST 7: Testing Permission Categories & Filtering...
🔧 MOCK: Query executed:
      SELECT category, COUNT(*) as count
      FR... (Type: COUNT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test permission categories and system vs tenant permissions
📊 Permissions by category:
  📁 undefined: 25 permissions

🏗️  TEST 8: System vs Tenant Permissions...
🔧 MOCK: Query executed:
      SELECT COUNT(*) as count FROM permissions W... (Type: COUNT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test permission categories and system vs tenant permissions
🔧 MOCK: Query executed:
      SELECT COUNT(*) as count FROM permissions W... (Type: COUNT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test permission categories and system vs tenant permissions
⚡ System permissions: 25
🏢 Tenant permissions: 25

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should show final summary statistics

📈 FINAL SUMMARY:
🔧 MOCK: Query executed:
      SELECT
        (SELECT COUNT(*) FROM permi... (Type: SUMMARY_STATS)
🔧 MOCK: Complex summary statistics query handled

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should show final summary statistics
📊 Database Statistics:
  🔑 Total Permissions: 25
  👑 Active Roles: 8
  🔗 Role-Permission Mappings: 15
  👤 Active User-Role Assignments: 12

🎉 All roles & permissions tests completed successfully!
✅ RBAC system is fully operational
✅ Permission checking functions working
✅ Role hierarchy system functional
✅ Tenant isolation working properly
✅ Expiration system operational

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System
🔧 MOCK: Database connection closed (mock mode)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System
🔌 Database connection closed

 ✓ __tests__/database/security/roles-permissions.test.ts (7 tests) 33ms
stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations
🚀 Starting Real-Time CRUD Operations Test...
🔧 SMART DB: Using mock mode for ES module tests

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
⏳ Connecting to database...
✅ Connected successfully! (Mock mode)

📖 STEP 1: Reading existing data...
🔧 Mock Query: SELECT * FROM tenants ORDER BY created_at...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
🔧 Mock Query: SELECT * FROM tenant_users ORDER BY created_at...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
📊 Found 0 tenants and 0 users

➕ STEP 2: Creating new tenant...
🔧 Mock Query:
        INSERT INTO tenants (name, type, status, ...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
✅ New tenant created: Mock Data (ID: mock-id-n2a2ettz3)

➕ STEP 3: Creating new user in tenant...
🔧 Mock Query:
        INSERT INTO tenant_users (
          tena...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
✅ New user created: Mock User (mock@test.com)

📖 STEP 4: Testing JOIN queries...
🔧 Mock Query:
        SELECT
          tu.id as user_id,
     ...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
🔗 Users with tenant information:

✏️  STEP 5: Testing UPDATE operations...
🔧 Mock Query:
        UPDATE tenant_users
        SET
       ...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
✅ Updated user profile data and last login for: mock@test.com

🔧 STEP 6: Skipping business logic functions (Mock mode)

🛡️  STEP 7: Testing constraint validations...
🔧 Mock Query:
          INSERT INTO tenant_users (tenant_id, em...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
✅ Constraint validation passed (Mock mode - no actual constraints)
🔧 Mock Query:
          INSERT INTO tenant_users (tenant_id, em...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
✅ Email format validation passed (Mock mode - no actual validation)

📊 STEP 8: Final data verification...
🔧 Mock Query: SELECT COUNT(*) as count FROM tenants...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
🔧 Mock Query: SELECT COUNT(*) as count FROM tenant_users...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
📈 Final counts:
  👥 Tenants: 1
  👤 Users: 1

🎉 All CRUD operations completed successfully!
✅ Database can manage data in real-time (Mock mode)
✅ All relationships and constraints are working
✅ Business logic functions are operational
✅ Data integrity is maintained

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations
🔌 Mock connection closed

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations
🔌 Database connection closed

 ✓ __tests__/database/integration/realtime-crud.test.mjs (1 test) 21ms
stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should successfully connect (real or mock)
🔍 SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/archived/test-debug.test.js
Loading test file...
test function: function
expect function: function
After import - test: function
After import - expect: function

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should successfully connect (real or mock)
✅ SMART DB: PostgreSQL connection berhasil

stdout | __tests__/archived/test-debug.test.js > debug test
Inside test function

 ✓ __tests__/archived/test-debug.test.js (1 test) 6ms
stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should return connection info
🔍 SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should return connection info
✅ SMART DB: PostgreSQL connection berhasil

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should return database client for queries
🔍 SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should return database client for queries
✅ SMART DB: PostgreSQL connection berhasil

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should execute basic query successfully
🔍 SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should execute basic query successfully
✅ SMART DB: PostgreSQL connection berhasil

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should handle connection errors gracefully with fallback
🔍 SMART DB: Mencoba koneksi ke PostgreSQL...

 ✓ __tests__/archived/test-working.test.ts (2 tests) 5ms
stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should handle connection errors gracefully with fallback
❌ SMART DB: PostgreSQL connection gagal: Connection timeout
🔧 SMART DB: Fallback ke mock mode
🔧 MOCK: Database connection established (mock mode)

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should handle connection errors gracefully with fallback
🔧 MOCK: Database connection closed (mock mode)

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection management > should close connection properly
🔍 SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection management > should close connection properly
✅ SMART DB: PostgreSQL connection berhasil

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection management > should indicate when connection is active
🔍 SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection management > should indicate when connection is active
✅ SMART DB: PostgreSQL connection berhasil

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > mock mode preference > should use mock when preferMock is true
🔧 SMART DB: Menggunakan mock mode (preferMock=true)
🔧 MOCK: Database connection established (mock mode)

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > mock mode preference > should use mock when preferMock is true
🔧 MOCK: Database connection closed (mock mode)

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > mock mode preference > should provide mock mode status
🔍 SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > mock mode preference > should provide mock mode status
✅ SMART DB: PostgreSQL connection berhasil

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > pool operations > should initialize pool after connection
🔍 SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > pool operations > should initialize pool after connection
✅ SMART DB: PostgreSQL connection berhasil

 ✓ __tests__/archived/test-explicit.test.js (2 tests) 7ms
stderr | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > pool operations > should initialize pool after connection
Database connection failed: Error: getaddrinfo ENOTFOUND nonexistent-host
    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26) {
  errno: -3008,
  code: 'ENOTFOUND',
  syscall: 'getaddrinfo',
  hostname: 'nonexistent-host'
}

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > pool operations > should return pool instance
🔍 SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > pool operations > should return pool instance
✅ SMART DB: PostgreSQL connection berhasil

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > query execution with different connections > should execute version query
🔍 SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > query execution with different connections > should execute version query
✅ SMART DB: PostgreSQL connection berhasil

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > query execution with different connections > should execute tenant queries (with fallback to mock)
🔍 SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > query execution with different connections > should execute tenant queries (with fallback to mock)
✅ SMART DB: PostgreSQL connection berhasil

 ✓ __tests__/database/unit/smart-connection.test.ts (17 tests) 1866ms
   ✓ SmartDatabaseConnection > connection establishment > should handle connection errors gracefully with fallback  513ms
 ✓ __tests__/database/unit/simple.test.ts (1 test) 7ms
 ✓ __tests__/database/unit/test-basic.test.ts (1 test) 8ms
 ✓ __tests__/archived/test-js.test.js (1 test) 7ms
 ✓ __tests__/archived/test-basic.test.js (1 test) 7ms
 ✓ __tests__/archived/test-basic.test.ts (1 test) 4ms
 ✓ __tests__/archived/test-globals.test.js (1 test) 6ms

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯ Failed Suites 17 ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯

 FAIL  __tests__/database/integration/database-realtime-verification.test.cjs [ __tests__/database/integration/database-realtime-verification.test.cjs ]
Error: Cannot find module 'D:\worksites\canvastack\apps\projects\weddinvite\src\database\connection.ts'
Require stack:
- D:\worksites\canvastack\apps\projects\weddinvite\__tests__\database\integration\database-realtime-verification.test.cjs
 ❯ __tests__/database/integration/database-realtime-verification.test.cjs:57:32
     55|
     56| // Database imports dengan proper path resolution
     57| const { DatabaseConnection } = require(path.resolve('./src/database/connection.ts'));
       |                                ^
     58| const { TenantsRepository } = require(path.resolve('./src/database/tenants.ts'));
     59| const { TenantUsersRepository } = require(path.resolve('./src/database/tenant-users.ts'));

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/17]⎯

 FAIL  __tests__/database/integration/event-management-engine.test.cjs [ __tests__/database/integration/event-management-engine.test.cjs ]
Error: Cannot find module '../utilities/db-connection.util.cjs'
Require stack:
- D:\worksites\canvastack\apps\projects\weddinvite\__tests__\database\integration\event-management-engine.test.cjs
 ❯ __tests__/database/integration/event-management-engine.test.cjs:11:83
      9| // Created: 2025-08-12
     10|
     11| const { executeQuery, executeTransaction, closeAllConnections, testConnection } = require('../utilities/db-connection.util.cjs');
       |                                                                                   ^
     12|
     13| async function runEventManagementEngineTests() {

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/17]⎯

 FAIL  __tests__/database/integration/event-management-simple.test.cjs [ __tests__/database/integration/event-management-simple.test.cjs ]
Error: Cannot find module '../utilities/db-connection.util.cjs'
Require stack:
- D:\worksites\canvastack\apps\projects\weddinvite\__tests__\database\integration\event-management-simple.test.cjs
 ❯ __tests__/database/integration/event-management-simple.test.cjs:11:83
      9| // Created: 2025-08-12
     10|
     11| const { executeQuery, executeTransaction, closeAllConnections, testConnection } = require('../utilities/db-connection.util.cjs');
       |                                                                                   ^
     12|
     13| async function runSimpleIntegrationTests() {

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/17]⎯

 FAIL  __tests__/database/integration/realtime-crud.test.cjs [ __tests__/database/integration/realtime-crud.test.cjs ]
Error: Cannot find module '../utilities/db-connection.util.cjs'
Require stack:
- D:\worksites\canvastack\apps\projects\weddinvite\__tests__\database\integration\realtime-crud.test.cjs
 ❯ __tests__/database/integration/realtime-crud.test.cjs:12:83
     10| // Created: 2025-08-12
     11|
     12| const { executeQuery, executeTransaction, closeAllConnections, testConnection } = require('../utilities/db-connection.util.cjs');
       |                                                                                   ^
     13|
     14| async function testRealTimeCrud() {

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/17]⎯

 FAIL  __tests__/database/integration/realtime-crud.test.ts [ __tests__/database/integration/realtime-crud.test.ts ]
Error: Cannot find module '../../src/database/core/smart-connection' imported from 'D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/integration/realtime-crud.test.ts'
 ❯ __tests__/database/integration/realtime-crud.test.ts:2:31
      1| import { describe, it, expect, beforeAll, afterAll } from 'vitest';
      2| import { SmartDatabaseConnection } from '../../src/database/core/smart-connection';
       |                               ^
      3|
      4| describe('Real-Time CRUD Operations', () => {

Caused by: Error: Failed to load url ../../src/database/core/smart-connection (resolved id: ../../src/database/core/smart-connection) in D:/worksites/canvastack/apps/projects/weddinvite/__t
ests__/database/security/rls-isolation.test.ts. Does the file exist?
 ❯ loadAndTransform node_modules/vite/dist/node/chunks/dep-C6uTJdX2.js:51968:17

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/17]⎯

 FAIL  __tests__/database/manual-tests/tenant-users-advanced.test.cjs [ __tests__/database/manual-tests/tenant-users-advanced.test.cjs ]
Error: No test suite found in file D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/manual-tests/tenant-users-advanced.test.cjs
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[6/17]⎯

 FAIL  __tests__/database/manual-tests/tenant-users-manual.test.cjs [ __tests__/database/manual-tests/tenant-users-manual.test.cjs ]
Error: No test suite found in file D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/manual-tests/tenant-users-manual.test.cjs
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[7/17]⎯

 FAIL  __tests__/database/manual-tests/tenants-comprehensive.test.cjs [ __tests__/database/manual-tests/tenants-comprehensive.test.cjs ]
Error: No test suite found in file D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/manual-tests/tenants-comprehensive.test.cjs
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[8/17]⎯

 FAIL  __tests__/database/migration-tests/post-migration.test.cjs [ __tests__/database/migration-tests/post-migration.test.cjs ]
Error: No test suite found in file D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/migration-tests/post-migration.test.cjs
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[9/17]⎯

 FAIL  __tests__/database/migration-tests/pre-migration.test.cjs [ __tests__/database/migration-tests/pre-migration.test.cjs ]
Error: No test suite found in file D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/migration-tests/pre-migration.test.cjs
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[10/17]⎯

 FAIL  __tests__/database/performance-tests/index-benchmark-simple.test.cjs [ __tests__/database/performance-tests/index-benchmark-simple.test.cjs ]
Error: No test suite found in file D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/performance-tests/index-benchmark-simple.test.cjs
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[11/17]⎯

 FAIL  __tests__/database/performance-tests/index-benchmark.test.cjs [ __tests__/database/performance-tests/index-benchmark.test.cjs ]
Error: No test suite found in file D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/performance-tests/index-benchmark.test.cjs
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[12/17]⎯

 FAIL  __tests__/database/performance-tests/index-performance-comprehensive.test.cjs [ __tests__/database/performance-tests/index-performance-comprehensive.test.cjs ]
Error: Cannot find module 'D:\worksites\canvastack\apps\projects\weddinvite\src\database\connection-js.cjs'
 RERUN  rerun all tests

stdout | __tests__/frontend/structural-tests/frontend-component-transformation.test.cjs
[2025-08-14T07:31:04.034Z] 🚀 Starting Frontend Component Transformation Tests (TFD)
[2025-08-14T07:31:04.036Z] =================================================================================
[2025-08-14T07:31:04.037Z] TEST 1: Validating generic event hook exists
[2025-08-14T07:31:04.037Z] ✅ Generic Event Content Hook: useEventContent.ts exists
[2025-08-14T07:31:04.037Z] ✅ Generic Event Hero Hook: useEventHero.ts exists
[2025-08-14T07:31:04.037Z] TEST 3: Validating wedding hooks backward compatibility
[2025-08-14T07:31:04.037Z] ❌ Wedding Content Hook Exists: useWeddingContent.ts missing
[2025-08-14T07:31:04.038Z] ❌ Wedding Hero Hook Exists: useWeddingHero.ts missing
[2025-08-14T07:31:04.038Z] TEST 5: Validating generic event components
[2025-08-14T07:31:04.039Z] ✅ Generic Event Hero Component: EventHero.tsx exists
[2025-08-14T07:31:04.039Z] ✅ Generic Event Details Component: EventDetails.tsx exists
[2025-08-14T07:31:04.039Z] ✅ Generic Participants Component: ParticipantsSection.tsx exists
[2025-08-14T07:31:04.039Z] TEST 8: Validating wedding components backward compatibility
[2025-08-14T07:31:04.039Z] ❌ Wedding Hero Component Exists: WeddingHero.tsx missing
[2025-08-14T07:31:04.039Z] ❌ Wedding Details Component Exists: WeddingDetails.tsx missing
[2025-08-14T07:31:04.039Z] ❌ Couple Section Component Exists: CoupleSection.tsx missing
[2025-08-14T07:31:04.039Z] TEST 11: Validating generic event hook content structure
[2025-08-14T07:31:04.040Z] ✅ Generic Event Participants Interface: Generic participant interfaces found
[2025-08-14T07:31:04.040Z] ❌ Generic Event Content Structure: Generic event content structure missing
[2025-08-14T07:31:04.040Z] ✅ Generic Event Data Models: Generic event data models found
[2025-08-14T07:31:04.040Z] ✅ Plugin Architecture Support: Plugin architecture support found
[2025-08-14T07:31:04.040Z] TEST 15: Validating database table name transformation
[2025-08-14T07:31:04.040Z] ✅ Generic Database Tables: Generic event and participant tables referenced
[2025-08-14T07:31:04.040Z] ❌ No Wedding-Specific Tables: Wedding-specific tables still referenced
[2025-08-14T07:31:04.040Z] ✅ Event Sections Support: Event sections/content support found
[2025-08-14T07:31:04.040Z] TEST 18: Validating generic component content
[2025-08-14T07:31:04.041Z] ✅ Generic Hook Usage: Uses useEventHero instead of useWeddingHero
[2025-08-14T07:31:04.041Z] ✅ Generic UI Text: No wedding-specific UI text found
[2025-08-14T07:31:04.041Z] ✅ Event Terminology: Generic event terminology used
[2025-08-14T07:31:04.041Z] ✅ Plugin Support in Components: Plugin support implemented in components
[2025-08-14T07:31:04.041Z] TEST 22: Validating wedding-to-event compatibility layer
[2025-08-14T07:31:04.041Z] ✅ Compatibility Layer Directory: Compatibility layer directory exists
[2025-08-14T07:31:04.041Z] ✅ Wedding Wrapper Exists: Wedding wrapper for backward compatibility exists
[2025-08-14T07:31:04.041Z] ✅ Wedding Plugin Mapping: Wedding-to-plugin mapping implemented
[2025-08-14T07:31:04.042Z] =================================================================================
[2025-08-14T07:31:04.042Z] 📊 FRONTEND COMPONENT TRANSFORMATION TEST RESULTS
[2025-08-14T07:31:04.042Z] Total Tests: 24
[2025-08-14T07:31:04.042Z] Passed: 17
[2025-08-14T07:31:04.042Z] Failed: 7
[2025-08-14T07:31:04.042Z] ⚠️  Frontend transformation needs work!
[2025-08-14T07:31:04.042Z] Success Rate: 70.83%
[2025-08-14T07:31:04.042Z] =================================================================================
[2025-08-14T07:31:04.042Z] ✨ Frontend Component Transformation Tests Completed

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should successfully connect (real or mock)
🔍 SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should successfully connect (real or mock)
✅ SMART DB: PostgreSQL connection berhasil

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should return connection info
🔍 SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should return connection info
✅ SMART DB: PostgreSQL connection berhasil

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should return database client for queries
🔍 SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should return database client for queries
✅ SMART DB: PostgreSQL connection berhasil

stdout | __tests__/plugins/dynamic-form-system.test.cjs
✅ PHASE 3: Dynamic Form System Tests - All tests configured
📋 Test Coverage:
  - Form Field Builder: ✅ Field creation, validation, presets
  - Validation Engine: ✅ Rules, cross-field, async validation
  - Form Utilities: ✅ Visibility, data extraction, summaries
  - Integration: ✅ Event-specific forms, complete workflows
  - Performance: ✅ Large forms, complex conditional logic

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should execute basic query successfully
🔍 SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should execute basic query successfully
✅ SMART DB: PostgreSQL connection berhasil

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should handle connection errors gracefully with fallback
🔍 SMART DB: Mencoba koneksi ke PostgreSQL...

 ✓ __tests__/plugins/dynamic-form-system.test.cjs (24 tests) 150ms
stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should handle connection errors gracefully with fallback
❌ SMART DB: PostgreSQL connection gagal: Connection timeout
🔧 SMART DB: Fallback ke mock mode
🔧 MOCK: Database connection established (mock mode)

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection establishment > should handle connection errors gracefully with fallback
🔧 MOCK: Database connection closed (mock mode)

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection management > should close connection properly
🔍 SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection management > should close connection properly
✅ SMART DB: PostgreSQL connection berhasil

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection management > should indicate when connection is active
🔍 SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/structural-tests/phase-2-3-hook-transformation.test.cjs > Phase 2.3: Generic Event Hooks Transformation > PHASE 2.3 COMPLETION VALIDATION > All required hooks sh
ould be implemented

🔍 PHASE 2.3 HOOK TRANSFORMATION ANALYSIS:
================================================
✅ useEventContent.ts:
   - Exists: ✅
   - Generic Support: ✅
   - Backward Compatibility: ✅
   - Proper Interfaces: ✅
   - Complete Implementation: ✅

✅ useEventParticipants.ts:
   - Exists: ✅
   - Generic Support: ✅
   - Backward Compatibility: ✅
   - Proper Interfaces: ✅
   - Complete Implementation: ✅

✅ useEventSettings.ts:
   - Exists: ✅
   - Generic Support: ✅
   - Backward Compatibility: ✅
   - Proper Interfaces: ✅
   - Complete Implementation: ✅

📊 PHASE 2.3 SUCCESS RATE: 100.00% (15/15 checks passed)
================================================


stdout | __tests__/database/structural-tests/phase-2-3-hook-transformation.test.cjs > Phase 2.3: Generic Event Hooks Transformation > PHASE 2.3 COMPLETION VALIDATION > Theme manager should
support multiple event types

🎨 THEME MANAGER TRANSFORMATION:
================================
✅ Multiple Event Type Themes: YES
✅ Event Type Mapping: YES
================================


stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > connection management > should indicate when connection is active
✅ SMART DB: PostgreSQL connection berhasil

 ✓ __tests__/database/structural-tests/phase-2-3-hook-transformation.test.cjs (49 tests) 82ms
stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > mock mode preference > should use mock when preferMock is true
🔧 SMART DB: Menggunakan mock mode (preferMock=true)
🔧 MOCK: Database connection established (mock mode)

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > mock mode preference > should use mock when preferMock is true
🔧 MOCK: Database connection closed (mock mode)

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > mock mode preference > should provide mock mode status
🔍 SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > mock mode preference > should provide mock mode status
✅ SMART DB: PostgreSQL connection berhasil

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > pool operations > should initialize pool after connection
🔍 SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > pool operations > should initialize pool after connection
✅ SMART DB: PostgreSQL connection berhasil

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > pool operations > should return pool instance
🔍 SMART DB: Mencoba koneksi ke PostgreSQL...

stderr | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > pool operations > should return pool instance
Database connection failed: Error: getaddrinfo ENOTFOUND nonexistent-host
    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26) {
  errno: -3008,
  code: 'ENOTFOUND',
  syscall: 'getaddrinfo',
  hostname: 'nonexistent-host'
}

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > pool operations > should return pool instance
✅ SMART DB: PostgreSQL connection berhasil

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > query execution with different connections > should execute version query
🔍 SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > query execution with different connections > should execute version query
✅ SMART DB: PostgreSQL connection berhasil

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > query execution with different connections > should execute tenant queries (with fallback to mock)
🔍 SMART DB: Mencoba koneksi ke PostgreSQL...

stdout | __tests__/database/unit/smart-connection.test.ts > SmartDatabaseConnection > query execution with different connections > should execute tenant queries (with fallback to mock)
✅ SMART DB: PostgreSQL connection berhasil

 ✓ __tests__/database/unit/smart-connection.test.ts (17 tests) 1743ms
   ✓ SmartDatabaseConnection > connection establishment > should handle connection errors gracefully with fallback  511ms
stdout | __tests__/database/structural-tests/phase-4-validation.test.cjs > PHASE 4: Data Migration Framework Validation > PHASE 4 COMPLETION VALIDATION > All migration components should be
complete and production-ready

🔍 PHASE 4 DATA MIGRATION ANALYSIS:
=====================================================
✅ 006_event_types_foundation.sql:
   - Exists: ✅
   - Complete: ✅
   - Proper Structure: ✅
   - Error Handling: ✅
   - Content Length: 3289 characters

✅ 007_events_core_tables.sql:
   - Exists: ✅
   - Complete: ✅
   - Proper Structure: ✅
   - Error Handling: ✅
   - Content Length: 8929 characters

✅ 008_enhanced_indexing.sql:
   - Exists: ✅
   - Complete: ✅
   - Proper Structure: ✅
   - Error Handling: ✅
   - Content Length: 3415 characters

✅ 009_wedding_compatibility.sql:
   - Exists: ✅
   - Complete: ✅
   - Proper Structure: ✅
   - Error Handling: ✅
   - Content Length: 3959 characters

✅ 010_wedding_data_migration.sql:
   - Exists: ✅
   - Complete: ✅
   - Proper Structure: ✅
   - Error Handling: ✅
   - Content Length: 10242 characters

✅ execute_transformation.cjs:
   - Exists: ✅
   - Complete: ✅
   - Proper Structure: ✅
   - Error Handling: ✅
   - Content Length: 24613 characters

✅ README.md:
   - Exists: ✅
   - Complete: ✅
   - Proper Structure: ✅
   - Error Handling: ✅
   - Content Length: 9157 characters

📊 PHASE 4 SUCCESS RATE: 100.00% (28/28 checks passed)
=====================================================


stdout | __tests__/database/structural-tests/phase-4-validation.test.cjs > PHASE 4: Data Migration Framework Validation > PHASE 4 COMPLETION VALIDATION > Migration framework should be produ
ction-ready

🚀 MIGRATION EXECUTOR READINESS:
==================================
✅ Class: YES
✅ DryRun: YES
✅ Rollback: YES
✅ Validation: YES
✅ Logging: YES
✅ ErrorHandling: YES
✅ Backup: YES
✅ CLI: YES
==================================


stdout | __tests__/database/structural-tests/phase-4-validation.test.cjs > PHASE 4: Data Migration Framework Validation > PHASE 4 COMPLETION VALIDATION > Data migration should preserve inte
grity and compatibility

🛡️ DATA INTEGRITY VALIDATION:
===============================
✅ BackupCreation: YES
✅ DataTransformation: YES
✅ CompatibilityViews: YES
✅ RSVPMapping: YES
✅ TenantIsolation: YES
✅ Logging: YES
===============================


 ✓ __tests__/database/structural-tests/phase-4-validation.test.cjs (40 tests) 67ms
stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System
🚀 Testing Roles & Permissions System...
🔧 SMART DB: Menggunakan mock mode (preferMock=true)
🔧 MOCK: Database connection established (mock mode)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System
✅ Connected successfully! (Mock mode)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should verify default data exists

📋 TEST 1: Verifying Default Data...
🔧 MOCK: Query executed: SELECT COUNT(*) as count FROM permissions... (Type: COUNT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should verify default data exists
📊 Default permissions: 25
🔧 MOCK: Query executed: SELECT COUNT(*) as count FROM user_roles... (Type: COUNT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should verify default data exists
👥 Default roles: 5
🔧 MOCK: Query executed: SELECT COUNT(*) as count FROM role_permissions... (Type: COUNT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should verify default data exists
🔗 Role-permission mappings: 25
🔧 MOCK: Query executed:
      SELECT name, resource, action, category, is... (Type: SELECT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should verify default data exists
🔑 Sample permissions:
  1. create_events (events.create) - event_management
  2. manage_users (users.manage) - user_management
  3. manage_tenants (tenants.manage) - tenant_management

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should create and manage custom tenant roles

➕ TEST 2: Creating Custom Tenant Role...
🔧 MOCK: Query executed:
      SELECT id, name FROM tenants
      WHERE t... (Type: SELECT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should create and manage custom tenant roles
🏢 Using tenant: Test Wedding Agency
🔧 MOCK: Query executed:
      INSERT INTO user_roles (tenant_id, name, di... (Type: INSERT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should create and manage custom tenant roles
✅ Created custom role: Custom Event Manager (ID: mock-custom-role-id)

🔑 TEST 3: Granting Permissions to Custom Role...
🔧 MOCK: Query executed:
      SELECT id, name FROM permissions
      WHE... (Type: SELECT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should create and manage custom tenant roles
📋 Granting 0 permissions to wedding_planner role...

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should assign roles to users and test permissions

👤 TEST 4: Assigning Role to User...
🔧 MOCK: Query executed:
      SELECT tu.id, tu.first_name, tu.last_name, ... (Type: SELECT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should assign roles to users and test permissions
👤 Testing with user: Test User (test@agency.com)
🔧 MOCK: Query executed:
      SELECT id, name FROM user_roles WHERE name ... (Type: SELECT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should assign roles to users and test permissions
⚠️  Custom role not found - creating mock assignment

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test role hierarchy and management

👑 TEST 5: Testing Role Hierarchy & Management...
   ⚠️  Skipping role hierarchy test in mock mode

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test role assignment with expiration

⏰ TEST 6: Testing Role Assignment with Expiration...
🔧 MOCK: Query executed:
      SELECT id FROM tenants WHERE type != 'super... (Type: SELECT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test role assignment with expiration
🔧 MOCK: Query executed:
      INSERT INTO user_roles (tenant_id, name, di... (Type: INSERT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test role assignment with expiration
📝 Created temporary role: Custom Event Manager
🔧 MOCK: Query executed:
      SELECT id FROM tenant_users WHERE tenant_id... (Type: SELECT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test role assignment with expiration
🔧 MOCK: Query executed:
        INSERT INTO user_role_assignments (user_i... (Type: INSERT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test role assignment with expiration
⏱️  Assigned temporary role with expiration: 2025-08-14T07:32:06.975Z

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test permission categories and system vs tenant permissions

📚 TEST 7: Testing Permission Categories & Filtering...
🔧 MOCK: Query executed:
      SELECT category, COUNT(*) as count
      FR... (Type: COUNT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test permission categories and system vs tenant permissions
📊 Permissions by category:
  📁 undefined: 25 permissions

🏗️  TEST 8: System vs Tenant Permissions...
🔧 MOCK: Query executed:
      SELECT COUNT(*) as count FROM permissions W... (Type: COUNT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test permission categories and system vs tenant permissions
🔧 MOCK: Query executed:
      SELECT COUNT(*) as count FROM permissions W... (Type: COUNT_QUERY)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should test permission categories and system vs tenant permissions
⚡ System permissions: 25
🏢 Tenant permissions: 25

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should show final summary statistics

📈 FINAL SUMMARY:
🔧 MOCK: Query executed:
      SELECT
        (SELECT COUNT(*) FROM permi... (Type: SUMMARY_STATS)
🔧 MOCK: Complex summary statistics query handled

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System > should show final summary statistics
📊 Database Statistics:
  🔑 Total Permissions: 25
  👑 Active Roles: 8
  🔗 Role-Permission Mappings: 15
  👤 Active User-Role Assignments: 12

🎉 All roles & permissions tests completed successfully!
✅ RBAC system is fully operational
✅ Permission checking functions working
✅ Role hierarchy system functional
✅ Tenant isolation working properly
✅ Expiration system operational

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System
🔧 MOCK: Database connection closed (mock mode)

stdout | __tests__/database/security/roles-permissions.test.ts > Roles & Permissions System
🔌 Database connection closed

 ✓ __tests__/database/security/roles-permissions.test.ts (7 tests) 31ms
stdout | __tests__/database/structural-tests/phase-4-data-migration.test.cjs > PHASE 4: Wedding Data Migration to Generic Events > PHASE 4 COMPLETION VALIDATION > All migration components s
hould be complete and properly structured

🔍 PHASE 4 DATA MIGRATION ANALYSIS:
=====================================================
✅ 006_event_types_foundation.sql:
   - Exists: ✅
   - Complete: ✅
   - Proper Structure: ✅
   - Error Handling: ✅
   - Content Length: 3289 characters

✅ 007_events_core_tables.sql:
   - Exists: ✅
   - Complete: ✅
   - Proper Structure: ✅
   - Error Handling: ✅
   - Content Length: 8929 characters

✅ 008_enhanced_indexing.sql:
   - Exists: ✅
   - Complete: ✅
   - Proper Structure: ✅
   - Error Handling: ✅
   - Content Length: 3415 characters

✅ 009_wedding_compatibility.sql:
   - Exists: ✅
   - Complete: ✅
   - Proper Structure: ✅
   - Error Handling: ✅
   - Content Length: 3959 characters

✅ 010_wedding_data_migration.sql:
   - Exists: ✅
   - Complete: ✅
   - Proper Structure: ✅
   - Error Handling: ✅
   - Content Length: 10242 characters

✅ execute_transformation.cjs:
   - Exists: ✅
   - Complete: ✅
   - Proper Structure: ✅
   - Error Handling: ✅
   - Content Length: 24613 characters

✅ README.md:
   - Exists: ✅
   - Complete: ✅
   - Proper Structure: ✅
   - Error Handling: ✅
   - Content Length: 9157 characters

📊 PHASE 4 SUCCESS RATE: 100.00% (28/28 checks passed)
=====================================================


stdout | __tests__/database/structural-tests/phase-4-data-migration.test.cjs > PHASE 4: Wedding Data Migration to Generic Events > PHASE 4 COMPLETION VALIDATION > Migration framework should
 be ready for production execution

🚀 MIGRATION EXECUTOR READINESS:
==================================
✅ Class: YES
✅ DryRun: YES
✅ Rollback: YES
✅ Validation: YES
✅ Logging: YES
✅ ErrorHandling: YES
✅ Backup: YES
✅ ProgressTracking: YES
==================================


 ✓ __tests__/database/structural-tests/phase-4-data-migration.test.cjs (43 tests) 43ms
stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations
🚀 Starting Real-Time CRUD Operations Test...
🔧 SMART DB: Using mock mode for ES module tests

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
⏳ Connecting to database...
✅ Connected successfully! (Mock mode)

📖 STEP 1: Reading existing data...
🔧 Mock Query: SELECT * FROM tenants ORDER BY created_at...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
🔧 Mock Query: SELECT * FROM tenant_users ORDER BY created_at...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
📊 Found 0 tenants and 0 users

➕ STEP 2: Creating new tenant...
🔧 Mock Query:
        INSERT INTO tenants (name, type, status, ...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
✅ New tenant created: Mock Data (ID: mock-id-rkhjuagdj)

➕ STEP 3: Creating new user in tenant...
🔧 Mock Query:
        INSERT INTO tenant_users (
          tena...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
✅ New user created: Mock User (mock@test.com)

📖 STEP 4: Testing JOIN queries...
🔧 Mock Query:
        SELECT
          tu.id as user_id,
     ...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
🔗 Users with tenant information:

✏️  STEP 5: Testing UPDATE operations...
🔧 Mock Query:
        UPDATE tenant_users
        SET
       ...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
✅ Updated user profile data and last login for: mock@test.com

🔧 STEP 6: Skipping business logic functions (Mock mode)

🛡️  STEP 7: Testing constraint validations...
🔧 Mock Query:
          INSERT INTO tenant_users (tenant_id, em...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
✅ Constraint validation passed (Mock mode - no actual constraints)
🔧 Mock Query:
          INSERT INTO tenant_users (tenant_id, em...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
✅ Email format validation passed (Mock mode - no actual validation)

📊 STEP 8: Final data verification...
🔧 Mock Query: SELECT COUNT(*) as count FROM tenants...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
🔧 Mock Query: SELECT COUNT(*) as count FROM tenant_users...

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations > should execute comprehensive CRUD operations
📈 Final counts:
  👥 Tenants: 1
  👤 Users: 1

🎉 All CRUD operations completed successfully!
✅ Database can manage data in real-time (Mock mode)
✅ All relationships and constraints are working
✅ Business logic functions are operational
✅ Data integrity is maintained

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations
🔌 Mock connection closed

stdout | __tests__/database/integration/realtime-crud.test.mjs > Real-Time CRUD Operations
🔌 Database connection closed

 ✓ __tests__/database/integration/realtime-crud.test.mjs (1 test) 18ms
 ✓ __tests__/database/unit/test-basic.test.ts (1 test) 6ms
 ✓ __tests__/archived/test-explicit.test.js (2 tests) 8ms
 ✓ __tests__/archived/test-js.test.js (1 test) 7ms
 ✓ __tests__/archived/test-basic.test.js (1 test) 6ms
 ✓ __tests__/database/unit/simple.test.ts (1 test) 7ms
stdout | __tests__/archived/test-debug.test.js
Loading test file...
test function: function
expect function: function
After import - test: function
After import - expect: function

stdout | __tests__/archived/test-debug.test.js > debug test
Inside test function

 ✓ __tests__/archived/test-debug.test.js (1 test) 8ms
 ✓ __tests__/archived/test-globals.test.js (1 test) 6ms
 ✓ __tests__/archived/test-working.test.ts (2 tests) 8ms
 ✓ __tests__/archived/test-basic.test.ts (1 test) 6ms

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯ Failed Suites 17 ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯

 FAIL  __tests__/database/integration/database-realtime-verification.test.cjs [ __tests__/database/integration/database-realtime-verification.test.cjs ]
Error: Cannot find module 'D:\worksites\canvastack\apps\projects\weddinvite\src\database\connection.ts'
Require stack:
- D:\worksites\canvastack\apps\projects\weddinvite\__tests__\database\integration\database-realtime-verification.test.cjs
 ❯ __tests__/database/integration/database-realtime-verification.test.cjs:57:32
     55|
     56| // Database imports dengan proper path resolution
     57| const { DatabaseConnection } = require(path.resolve('./src/database/connection.ts'));
       |                                ^
     58| const { TenantsRepository } = require(path.resolve('./src/database/tenants.ts'));
     59| const { TenantUsersRepository } = require(path.resolve('./src/database/tenant-users.ts'));

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/17]⎯

 FAIL  __tests__/database/integration/event-management-engine.test.cjs [ __tests__/database/integration/event-management-engine.test.cjs ]
Error: Cannot find module '../utilities/db-connection.util.cjs'
Require stack:
- D:\worksites\canvastack\apps\projects\weddinvite\__tests__\database\integration\event-management-engine.test.cjs
 ❯ __tests__/database/integration/event-management-engine.test.cjs:11:83
      9| // Created: 2025-08-12
     10|
     11| const { executeQuery, executeTransaction, closeAllConnections, testConnection } = require('../utilities/db-connection.util.cjs');
       |                                                                                   ^
     12|
     13| async function runEventManagementEngineTests() {

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/17]⎯

 FAIL  __tests__/database/integration/event-management-simple.test.cjs [ __tests__/database/integration/event-management-simple.test.cjs ]
Error: Cannot find module '../utilities/db-connection.util.cjs'
Require stack:
- D:\worksites\canvastack\apps\projects\weddinvite\__tests__\database\integration\event-management-simple.test.cjs
 ❯ __tests__/database/integration/event-management-simple.test.cjs:11:83
      9| // Created: 2025-08-12
     10|
     11| const { executeQuery, executeTransaction, closeAllConnections, testConnection } = require('../utilities/db-connection.util.cjs');
       |                                                                                   ^
     12|
     13| async function runSimpleIntegrationTests() {

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/17]⎯

 FAIL  __tests__/database/integration/realtime-crud.test.cjs [ __tests__/database/integration/realtime-crud.test.cjs ]
Error: Cannot find module '../utilities/db-connection.util.cjs'
Require stack:
- D:\worksites\canvastack\apps\projects\weddinvite\__tests__\database\integration\realtime-crud.test.cjs
 ❯ __tests__/database/integration/realtime-crud.test.cjs:12:83
     10| // Created: 2025-08-12
     11|
     12| const { executeQuery, executeTransaction, closeAllConnections, testConnection } = require('../utilities/db-connection.util.cjs');
       |                                                                                   ^
     13|
     14| async function testRealTimeCrud() {

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/17]⎯

 FAIL  __tests__/database/integration/realtime-crud.test.ts [ __tests__/database/integration/realtime-crud.test.ts ]
Error: Cannot find module '../../src/database/core/smart-connection' imported from 'D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/integration/realtime-crud.test.ts'
 ❯ __tests__/database/integration/realtime-crud.test.ts:2:31
      1| import { describe, it, expect, beforeAll, afterAll } from 'vitest';
      2| import { SmartDatabaseConnection } from '../../src/database/core/smart-connection';
       |                               ^
      3|
      4| describe('Real-Time CRUD Operations', () => {

Caused by: Error: Failed to load url ../../src/database/core/smart-connection (resolved id: ../../src/database/core/smart-connection) in D:/worksites/canvastack/apps/projects/weddinvite/__t
ests__/database/security/rls-isolation.test.ts. Does the file exist?
 ❯ loadAndTransform node_modules/vite/dist/node/chunks/dep-C6uTJdX2.js:51968:17

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/17]⎯

 FAIL  __tests__/database/manual-tests/tenant-users-advanced.test.cjs [ __tests__/database/manual-tests/tenant-users-advanced.test.cjs ]
Error: No test suite found in file D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/manual-tests/tenant-users-advanced.test.cjs
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[6/17]⎯

 FAIL  __tests__/database/manual-tests/tenant-users-manual.test.cjs [ __tests__/database/manual-tests/tenant-users-manual.test.cjs ]
Error: No test suite found in file D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/manual-tests/tenant-users-manual.test.cjs
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[7/17]⎯

 FAIL  __tests__/database/manual-tests/tenants-comprehensive.test.cjs [ __tests__/database/manual-tests/tenants-comprehensive.test.cjs ]
Error: No test suite found in file D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/manual-tests/tenants-comprehensive.test.cjs
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[8/17]⎯

 FAIL  __tests__/database/migration-tests/post-migration.test.cjs [ __tests__/database/migration-tests/post-migration.test.cjs ]
Error: No test suite found in file D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/migration-tests/post-migration.test.cjs
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[9/17]⎯

 FAIL  __tests__/database/migration-tests/pre-migration.test.cjs [ __tests__/database/migration-tests/pre-migration.test.cjs ]
Error: No test suite found in file D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/migration-tests/pre-migration.test.cjs
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[10/17]⎯

 FAIL  __tests__/database/performance-tests/index-benchmark-simple.test.cjs [ __tests__/database/performance-tests/index-benchmark-simple.test.cjs ]
Error: No test suite found in file D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/performance-tests/index-benchmark-simple.test.cjs
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[11/17]⎯

 FAIL  __tests__/database/performance-tests/index-benchmark.test.cjs [ __tests__/database/performance-tests/index-benchmark.test.cjs ]
Error: No test suite found in file D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/performance-tests/index-benchmark.test.cjs
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[12/17]⎯

 FAIL  __tests__/database/performance-tests/index-performance-comprehensive.test.cjs [ __tests__/database/performance-tests/index-performance-comprehensive.test.cjs ]
Error: Cannot find module 'D:\worksites\canvastack\apps\projects\weddinvite\src\database\connection-js.cjs'
Require stack:
- D:\worksites\canvastack\apps\projects\weddinvite\__tests__\database\performance-tests\index-performance-comprehensive.test.cjs
 ❯ __tests__/database/performance-tests/index-performance-comprehensive.test.cjs:60:31
     58|
     59| // Database connection imports dengan proper path resolution
     60| const { connectToDatabase } = require(path.resolve('./src/database/connection-js.cjs'));
       |                               ^
     61| const { createTestTenant, cleanupTestTenant } = require(path.resolve('./src/database/test-tenants-manual-js.cjs'));
     62|

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[13/17]⎯

 FAIL  __tests__/database/performance-tests/slow-query-detector.test.cjs [ __tests__/database/performance-tests/slow-query-detector.test.cjs ]
Error: No test suite found in file D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/performance-tests/slow-query-detector.test.cjs
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[14/17]⎯

 FAIL  __tests__/database/security/rls-isolation.test.ts [ __tests__/database/security/rls-isolation.test.ts ]
Error: Cannot find module '../../src/database/core/smart-connection' imported from 'D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/security/rls-isolation.test.ts'
 ❯ __tests__/database/security/rls-isolation.test.ts:2:31
      1| /**
      2|  * Comprehensive Row Level Security (RLS) Testing
       |                               ^
      3|  * Tests tenant isolation, security policies, and context management
      4|  */

Caused by: Error: Failed to load url ../../src/database/core/smart-connection (resolved id: ../../src/database/core/smart-connection) in D:/worksites/canvastack/apps/projects/weddinvite/__t
ests__/database/security/rls-isolation.test.ts. Does the file exist?
 ❯ loadAndTransform node_modules/vite/dist/node/chunks/dep-C6uTJdX2.js:51968:17

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[15/17]⎯

 FAIL  __tests__/database/validation-tests/post-transformation.test.cjs [ __tests__/database/validation-tests/post-transformation.test.cjs ]
Error: No test suite found in file D:/worksites/canvastack/apps/projects/weddinvite/__tests__/database/validation-tests/post-transformation.test.cjs
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[16/17]⎯

 FAIL  __tests__/frontend/structural-tests/frontend-component-transformation.test.cjs [ __tests__/frontend/structural-tests/frontend-component-transformation.test.cjs ]
Error: No test suite found in file D:/worksites/canvastack/apps/projects/weddinvite/__tests__/frontend/structural-tests/frontend-component-transformation.test.cjs
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[17/17]⎯


 Test Files  17 failed | 16 passed (33)
      Tests  192 passed (192)
   Start at  14:30:58
   Duration  3.64s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit

